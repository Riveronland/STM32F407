ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 1


   1              		.cpu cortex-m4
   2              		.arch armv7e-m
   3              		.fpu fpv4-sp-d16
   4              		.eabi_attribute 27, 1
   5              		.eabi_attribute 28, 1
   6              		.eabi_attribute 20, 1
   7              		.eabi_attribute 21, 1
   8              		.eabi_attribute 23, 3
   9              		.eabi_attribute 24, 1
  10              		.eabi_attribute 25, 1
  11              		.eabi_attribute 26, 1
  12              		.eabi_attribute 30, 1
  13              		.eabi_attribute 34, 1
  14              		.eabi_attribute 18, 4
  15              		.file	"ip4.c"
  16              		.text
  17              	.Ltext0:
  18              		.cfi_sections	.debug_frame
  19              		.section	.text.ip4_input_accept,"ax",%progbits
  20              		.align	1
  21              		.syntax unified
  22              		.thumb
  23              		.thumb_func
  25              	ip4_input_accept:
  26              	.LVL0:
  27              	.LFB161:
  28              		.file 1 "ThirdPackage/lwip220/core/ipv4/ip4.c"
   1:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
   2:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @file
   3:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * This is the IPv4 layer implementation for incoming and outgoing IP traffic.
   4:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
   5:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @see ip_frag.c
   6:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
   7:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
   8:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
   9:ThirdPackage/lwip220/core/ipv4/ip4.c **** /*
  10:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Copyright (c) 2001-2004 Swedish Institute of Computer Science.
  11:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * All rights reserved.
  12:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
  13:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Redistribution and use in source and binary forms, with or without modification,
  14:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * are permitted provided that the following conditions are met:
  15:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
  16:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * 1. Redistributions of source code must retain the above copyright notice,
  17:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *    this list of conditions and the following disclaimer.
  18:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * 2. Redistributions in binary form must reproduce the above copyright notice,
  19:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *    this list of conditions and the following disclaimer in the documentation
  20:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *    and/or other materials provided with the distribution.
  21:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * 3. The name of the author may not be used to endorse or promote products
  22:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *    derived from this software without specific prior written permission.
  23:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
  24:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * THIS SOFTWARE IS PROVIDED BY THE AUTHOR ``AS IS'' AND ANY EXPRESS OR IMPLIED
  25:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * WARRANTIES, INCLUDING, BUT NOT LIMITED TO, THE IMPLIED WARRANTIES OF
  26:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * MERCHANTABILITY AND FITNESS FOR A PARTICULAR PURPOSE ARE DISCLAIMED. IN NO EVENT
  27:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * SHALL THE AUTHOR BE LIABLE FOR ANY DIRECT, INDIRECT, INCIDENTAL, SPECIAL,
  28:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * EXEMPLARY, OR CONSEQUENTIAL DAMAGES (INCLUDING, BUT NOT LIMITED TO, PROCUREMENT
  29:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * OF SUBSTITUTE GOODS OR SERVICES; LOSS OF USE, DATA, OR PROFITS; OR BUSINESS
  30:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * INTERRUPTION) HOWEVER CAUSED AND ON ANY THEORY OF LIABILITY, WHETHER IN
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 2


  31:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * CONTRACT, STRICT LIABILITY, OR TORT (INCLUDING NEGLIGENCE OR OTHERWISE) ARISING
  32:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * IN ANY WAY OUT OF THE USE OF THIS SOFTWARE, EVEN IF ADVISED OF THE POSSIBILITY
  33:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * OF SUCH DAMAGE.
  34:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
  35:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * This file is part of the lwIP TCP/IP stack.
  36:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
  37:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Author: Adam Dunkels <adam@sics.se>
  38:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
  39:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
  40:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
  41:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/opt.h"
  42:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
  43:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_IPV4
  44:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
  45:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/ip.h"
  46:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/def.h"
  47:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/mem.h"
  48:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/ip4_frag.h"
  49:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/inet_chksum.h"
  50:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/netif.h"
  51:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/icmp.h"
  52:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/igmp.h"
  53:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/priv/raw_priv.h"
  54:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/udp.h"
  55:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/priv/tcp_priv.h"
  56:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/autoip.h"
  57:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/stats.h"
  58:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include "lwip/prot/iana.h"
  59:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
  60:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include <string.h>
  61:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
  62:ThirdPackage/lwip220/core/ipv4/ip4.c **** #ifdef LWIP_HOOK_FILENAME
  63:ThirdPackage/lwip220/core/ipv4/ip4.c **** #include LWIP_HOOK_FILENAME
  64:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif
  65:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
  66:ThirdPackage/lwip220/core/ipv4/ip4.c **** /** Set this to 0 in the rare case of wanting to call an extra function to
  67:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * generate the IP checksum (in contrast to calculating it on-the-fly). */
  68:ThirdPackage/lwip220/core/ipv4/ip4.c **** #ifndef LWIP_INLINE_IP_CHKSUM
  69:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_CHECKSUM_CTRL_PER_NETIF
  70:ThirdPackage/lwip220/core/ipv4/ip4.c **** #define LWIP_INLINE_IP_CHKSUM   0
  71:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else /* LWIP_CHECKSUM_CTRL_PER_NETIF */
  72:ThirdPackage/lwip220/core/ipv4/ip4.c **** #define LWIP_INLINE_IP_CHKSUM   1
  73:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_CHECKSUM_CTRL_PER_NETIF */
  74:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif
  75:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
  76:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_INLINE_IP_CHKSUM && CHECKSUM_GEN_IP
  77:ThirdPackage/lwip220/core/ipv4/ip4.c **** #define CHECKSUM_GEN_IP_INLINE  1
  78:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else
  79:ThirdPackage/lwip220/core/ipv4/ip4.c **** #define CHECKSUM_GEN_IP_INLINE  0
  80:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif
  81:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
  82:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_DHCP || defined(LWIP_IP_ACCEPT_UDP_PORT)
  83:ThirdPackage/lwip220/core/ipv4/ip4.c **** #define IP_ACCEPT_LINK_LAYER_ADDRESSING 1
  84:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
  85:ThirdPackage/lwip220/core/ipv4/ip4.c **** /** Some defines for DHCP to let link-layer-addressed packets through while the
  86:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * netif is down.
  87:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * To use this in your own application/protocol, define LWIP_IP_ACCEPT_UDP_PORT(port)
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 3


  88:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * to return 1 if the port is accepted and 0 if the port is not accepted.
  89:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
  90:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_DHCP && defined(LWIP_IP_ACCEPT_UDP_PORT)
  91:ThirdPackage/lwip220/core/ipv4/ip4.c **** /* accept DHCP client port and custom port */
  92:ThirdPackage/lwip220/core/ipv4/ip4.c **** #define IP_ACCEPT_LINK_LAYER_ADDRESSED_PORT(port) (((port) == PP_NTOHS(LWIP_IANA_PORT_DHCP_CLIENT))
  93:ThirdPackage/lwip220/core/ipv4/ip4.c ****          || (LWIP_IP_ACCEPT_UDP_PORT(port)))
  94:ThirdPackage/lwip220/core/ipv4/ip4.c **** #elif defined(LWIP_IP_ACCEPT_UDP_PORT) /* LWIP_DHCP && defined(LWIP_IP_ACCEPT_UDP_PORT) */
  95:ThirdPackage/lwip220/core/ipv4/ip4.c **** /* accept custom port only */
  96:ThirdPackage/lwip220/core/ipv4/ip4.c **** #define IP_ACCEPT_LINK_LAYER_ADDRESSED_PORT(port) (LWIP_IP_ACCEPT_UDP_PORT(port))
  97:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else /* LWIP_DHCP && defined(LWIP_IP_ACCEPT_UDP_PORT) */
  98:ThirdPackage/lwip220/core/ipv4/ip4.c **** /* accept DHCP client port only */
  99:ThirdPackage/lwip220/core/ipv4/ip4.c **** #define IP_ACCEPT_LINK_LAYER_ADDRESSED_PORT(port) ((port) == PP_NTOHS(LWIP_IANA_PORT_DHCP_CLIENT))
 100:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_DHCP && defined(LWIP_IP_ACCEPT_UDP_PORT) */
 101:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 102:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else /* LWIP_DHCP */
 103:ThirdPackage/lwip220/core/ipv4/ip4.c **** #define IP_ACCEPT_LINK_LAYER_ADDRESSING 0
 104:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_DHCP */
 105:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 106:ThirdPackage/lwip220/core/ipv4/ip4.c **** /** The IP header ID of the next outgoing IP packet */
 107:ThirdPackage/lwip220/core/ipv4/ip4.c **** static u16_t ip_id;
 108:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 109:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_MULTICAST_TX_OPTIONS
 110:ThirdPackage/lwip220/core/ipv4/ip4.c **** /** The default netif used for multicast */
 111:ThirdPackage/lwip220/core/ipv4/ip4.c **** static struct netif *ip4_default_multicast_netif;
 112:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 113:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
 114:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @ingroup ip4
 115:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Set a default netif for IPv4 multicast. */
 116:ThirdPackage/lwip220/core/ipv4/ip4.c **** void
 117:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_set_default_multicast_netif(struct netif *default_multicast_netif)
 118:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
 119:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip4_default_multicast_netif = default_multicast_netif;
 120:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 121:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_MULTICAST_TX_OPTIONS */
 122:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 123:ThirdPackage/lwip220/core/ipv4/ip4.c **** #ifdef LWIP_HOOK_IP4_ROUTE_SRC
 124:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
 125:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Source based IPv4 routing must be fully implemented in
 126:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * LWIP_HOOK_IP4_ROUTE_SRC(). This function only provides the parameters.
 127:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
 128:ThirdPackage/lwip220/core/ipv4/ip4.c **** struct netif *
 129:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_route_src(const ip4_addr_t *src, const ip4_addr_t *dest)
 130:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
 131:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (src != NULL) {
 132:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* when src==NULL, the hook is called from ip4_route(dest) */
 133:ThirdPackage/lwip220/core/ipv4/ip4.c ****     struct netif *netif = LWIP_HOOK_IP4_ROUTE_SRC(src, dest);
 134:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (netif != NULL) {
 135:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return netif;
 136:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 137:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 138:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return ip4_route(dest);
 139:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 140:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_HOOK_IP4_ROUTE_SRC */
 141:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 142:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
 143:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Finds the appropriate network interface for a given IP address. It
 144:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * searches the list of network interfaces linearly. A match is found
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 4


 145:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * if the masked IP address of the network interface equals the masked
 146:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * IP address given to the function.
 147:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
 148:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param dest the destination IP address for which to find the route
 149:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @return the netif on which to send to reach dest
 150:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
 151:ThirdPackage/lwip220/core/ipv4/ip4.c **** struct netif *
 152:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_route(const ip4_addr_t *dest)
 153:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
 154:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if !LWIP_SINGLE_NETIF
 155:ThirdPackage/lwip220/core/ipv4/ip4.c ****   struct netif *netif;
 156:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 157:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_ASSERT_CORE_LOCKED();
 158:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 159:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_MULTICAST_TX_OPTIONS
 160:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* Use administratively selected interface for multicast by default */
 161:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (ip4_addr_ismulticast(dest) && ip4_default_multicast_netif) {
 162:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ip4_default_multicast_netif;
 163:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 164:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_MULTICAST_TX_OPTIONS */
 165:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 166:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* bug #54569: in case LWIP_SINGLE_NETIF=1 and LWIP_DEBUGF() disabled, the following loop is opti
 167:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_UNUSED_ARG(dest);
 168:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 169:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* iterate through netifs */
 170:ThirdPackage/lwip220/core/ipv4/ip4.c ****   NETIF_FOREACH(netif) {
 171:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* is the netif up, does it have a link and a valid address? */
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (netif_is_up(netif) && netif_is_link_up(netif) && !ip4_addr_isany_val(*netif_ip4_addr(netif)
 173:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 174:ThirdPackage/lwip220/core/ipv4/ip4.c ****       if (ip4_addr_net_eq(dest, netif_ip4_addr(netif), netif_ip4_netmask(netif))) {
 175:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* return netif on which to forward IP packet */
 176:ThirdPackage/lwip220/core/ipv4/ip4.c ****         return netif;
 177:ThirdPackage/lwip220/core/ipv4/ip4.c ****       }
 178:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* gateway matches on a non broadcast interface? (i.e. peer in a point to point interface) */
 179:ThirdPackage/lwip220/core/ipv4/ip4.c ****       if (((netif->flags & NETIF_FLAG_BROADCAST) == 0) && ip4_addr_eq(dest, netif_ip4_gw(netif))) {
 180:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* return netif on which to forward IP packet */
 181:ThirdPackage/lwip220/core/ipv4/ip4.c ****         return netif;
 182:ThirdPackage/lwip220/core/ipv4/ip4.c ****       }
 183:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 184:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 185:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 186:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_NETIF_LOOPBACK && !LWIP_HAVE_LOOPIF
 187:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* loopif is disabled, loopback traffic is passed through any netif */
 188:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (ip4_addr_isloopback(dest)) {
 189:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* don't check for link on loopback traffic */
 190:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if ((netif_default != NULL) && netif_is_up(netif_default)) {
 191:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return netif_default;
 192:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 193:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* default netif is not up, just use any netif for loopback traffic */
 194:ThirdPackage/lwip220/core/ipv4/ip4.c ****     NETIF_FOREACH(netif) {
 195:ThirdPackage/lwip220/core/ipv4/ip4.c ****       if (netif_is_up(netif)) {
 196:ThirdPackage/lwip220/core/ipv4/ip4.c ****         return netif;
 197:ThirdPackage/lwip220/core/ipv4/ip4.c ****       }
 198:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 199:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return NULL;
 200:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 201:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_NETIF_LOOPBACK && !LWIP_HAVE_LOOPIF */
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 5


 202:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 203:ThirdPackage/lwip220/core/ipv4/ip4.c **** #ifdef LWIP_HOOK_IP4_ROUTE_SRC
 204:ThirdPackage/lwip220/core/ipv4/ip4.c ****   netif = LWIP_HOOK_IP4_ROUTE_SRC(NULL, dest);
 205:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (netif != NULL) {
 206:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return netif;
 207:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 208:ThirdPackage/lwip220/core/ipv4/ip4.c **** #elif defined(LWIP_HOOK_IP4_ROUTE)
 209:ThirdPackage/lwip220/core/ipv4/ip4.c ****   netif = LWIP_HOOK_IP4_ROUTE(dest);
 210:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (netif != NULL) {
 211:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return netif;
 212:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 213:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif
 214:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* !LWIP_SINGLE_NETIF */
 215:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if ((netif_default == NULL) || !netif_is_up(netif_default) || !netif_is_link_up(netif_default) ||
 217:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 218:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* No matching netif found and default netif is not usable.
 219:ThirdPackage/lwip220/core/ipv4/ip4.c ****        If this is not good enough for you, use LWIP_HOOK_IP4_ROUTE() */
 220:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("ip4_route: No route to %"U16_F".%"U16_F".%"U16
 221:ThirdPackage/lwip220/core/ipv4/ip4.c ****                 ip4_addr1_16(dest), ip4_addr2_16(dest), ip4_addr3_16(dest), ip4_addr4_16(dest)));
 222:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.rterr);
 223:ThirdPackage/lwip220/core/ipv4/ip4.c ****     MIB2_STATS_INC(mib2.ipoutnoroutes);
 224:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return NULL;
 225:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 226:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 227:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return netif_default;
 228:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 229:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 230:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_FORWARD
 231:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
 232:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Determine whether an IP address is in a reserved set of addresses
 233:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * that may not be forwarded, or whether datagrams to that destination
 234:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * may be forwarded.
 235:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param p the packet to forward
 236:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @return 1: can forward 0: discard
 237:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
 238:ThirdPackage/lwip220/core/ipv4/ip4.c **** static int
 239:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_canforward(struct pbuf *p)
 240:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
 241:ThirdPackage/lwip220/core/ipv4/ip4.c ****   u32_t addr = lwip_htonl(ip4_addr_get_u32(ip4_current_dest_addr()));
 242:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 243:ThirdPackage/lwip220/core/ipv4/ip4.c **** #ifdef LWIP_HOOK_IP4_CANFORWARD
 244:ThirdPackage/lwip220/core/ipv4/ip4.c ****   int ret = LWIP_HOOK_IP4_CANFORWARD(p, addr);
 245:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (ret >= 0) {
 246:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ret;
 247:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 248:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_HOOK_IP4_CANFORWARD */
 249:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 250:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (p->flags & PBUF_FLAG_LLBCAST) {
 251:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* don't route link-layer broadcasts */
 252:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return 0;
 253:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 254:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if ((p->flags & PBUF_FLAG_LLMCAST) || IP_MULTICAST(addr)) {
 255:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* don't route link-layer multicasts (use LWIP_HOOK_IP4_CANFORWARD instead) */
 256:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return 0;
 257:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 258:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (IP_EXPERIMENTAL(addr)) {
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 6


 259:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return 0;
 260:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 261:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (IP_CLASSA(addr)) {
 262:ThirdPackage/lwip220/core/ipv4/ip4.c ****     u32_t net = addr & IP_CLASSA_NET;
 263:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if ((net == 0) || (net == ((u32_t)IP_LOOPBACKNET << IP_CLASSA_NSHIFT))) {
 264:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* don't route loopback packets */
 265:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return 0;
 266:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 267:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 268:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return 1;
 269:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 270:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 271:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
 272:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Forwards an IP packet. It finds an appropriate route for the
 273:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * packet, decrements the TTL value of the packet, adjusts the
 274:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * checksum and outputs the packet on the appropriate interface.
 275:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
 276:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param p the packet to forward (p->payload points to IP header)
 277:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param iphdr the IP header of the input packet
 278:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param inp the netif on which this packet was received
 279:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
 280:ThirdPackage/lwip220/core/ipv4/ip4.c **** static void
 281:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_forward(struct pbuf *p, struct ip_hdr *iphdr, struct netif *inp)
 282:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
 283:ThirdPackage/lwip220/core/ipv4/ip4.c ****   struct netif *netif;
 284:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 285:ThirdPackage/lwip220/core/ipv4/ip4.c ****   PERF_START;
 286:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_UNUSED_ARG(inp);
 287:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 288:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (!ip4_canforward(p)) {
 289:ThirdPackage/lwip220/core/ipv4/ip4.c ****     goto return_noroute;
 290:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 291:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 292:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* RFC3927 2.7: do not forward link-local addresses */
 293:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (ip4_addr_islinklocal(ip4_current_dest_addr())) {
 294:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_DEBUGF(IP_DEBUG, ("ip4_forward: not forwarding LLA %"U16_F".%"U16_F".%"U16_F".%"U16_F"\n",
 295:ThirdPackage/lwip220/core/ipv4/ip4.c ****                            ip4_addr1_16(ip4_current_dest_addr()), ip4_addr2_16(ip4_current_dest_add
 296:ThirdPackage/lwip220/core/ipv4/ip4.c ****                            ip4_addr3_16(ip4_current_dest_addr()), ip4_addr4_16(ip4_current_dest_add
 297:ThirdPackage/lwip220/core/ipv4/ip4.c ****     goto return_noroute;
 298:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 299:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 300:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* Find network interface where to forward this IP packet to. */
 301:ThirdPackage/lwip220/core/ipv4/ip4.c ****   netif = ip4_route_src(ip4_current_src_addr(), ip4_current_dest_addr());
 302:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (netif == NULL) {
 303:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_DEBUGF(IP_DEBUG, ("ip4_forward: no forwarding route for %"U16_F".%"U16_F".%"U16_F".%"U16_F
 304:ThirdPackage/lwip220/core/ipv4/ip4.c ****                            ip4_addr1_16(ip4_current_dest_addr()), ip4_addr2_16(ip4_current_dest_add
 305:ThirdPackage/lwip220/core/ipv4/ip4.c ****                            ip4_addr3_16(ip4_current_dest_addr()), ip4_addr4_16(ip4_current_dest_add
 306:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* @todo: send ICMP_DUR_NET? */
 307:ThirdPackage/lwip220/core/ipv4/ip4.c ****     goto return_noroute;
 308:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 309:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if !IP_FORWARD_ALLOW_TX_ON_RX_NETIF
 310:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* Do not forward packets onto the same network interface on which
 311:ThirdPackage/lwip220/core/ipv4/ip4.c ****    * they arrived. */
 312:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (netif == inp) {
 313:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_DEBUGF(IP_DEBUG, ("ip4_forward: not bouncing packets back on incoming interface.\n"));
 314:ThirdPackage/lwip220/core/ipv4/ip4.c ****     goto return_noroute;
 315:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 7


 316:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_FORWARD_ALLOW_TX_ON_RX_NETIF */
 317:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 318:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* decrement TTL */
 319:ThirdPackage/lwip220/core/ipv4/ip4.c ****   IPH_TTL_SET(iphdr, IPH_TTL(iphdr) - 1);
 320:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* send ICMP if TTL == 0 */
 321:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (IPH_TTL(iphdr) == 0) {
 322:ThirdPackage/lwip220/core/ipv4/ip4.c ****     MIB2_STATS_INC(mib2.ipinhdrerrors);
 323:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_ICMP
 324:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* Don't send ICMP messages in response to ICMP messages */
 325:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (IPH_PROTO(iphdr) != IP_PROTO_ICMP) {
 326:ThirdPackage/lwip220/core/ipv4/ip4.c ****       icmp_time_exceeded(p, ICMP_TE_TTL);
 327:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 328:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_ICMP */
 329:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return;
 330:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 331:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 332:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* Incrementally update the IP checksum. */
 333:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (IPH_CHKSUM(iphdr) >= PP_HTONS(0xffffU - 0x100)) {
 334:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IPH_CHKSUM_SET(iphdr, (u16_t)(IPH_CHKSUM(iphdr) + PP_HTONS(0x100) + 1));
 335:ThirdPackage/lwip220/core/ipv4/ip4.c ****   } else {
 336:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IPH_CHKSUM_SET(iphdr, (u16_t)(IPH_CHKSUM(iphdr) + PP_HTONS(0x100)));
 337:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 338:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 339:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* Take care of setting checksums to 0 for checksum offload netifs */
 340:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (CHECKSUM_GEN_IP || NETIF_CHECKSUM_ENABLED(inp, NETIF_CHECKSUM_GEN_IP)) {
 341:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IPH_CHKSUM_SET(iphdr, 0);
 342:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 343:ThirdPackage/lwip220/core/ipv4/ip4.c ****   switch (IPH_PROTO(iphdr)) {
 344:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_UDP
 345:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_UDPLITE
 346:ThirdPackage/lwip220/core/ipv4/ip4.c ****   case IP_PROTO_UDPLITE:
 347:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif
 348:ThirdPackage/lwip220/core/ipv4/ip4.c ****   case IP_PROTO_UDP:
 349:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (CHECKSUM_GEN_UDP || NETIF_CHECKSUM_ENABLED(inp, NETIF_CHECKSUM_GEN_UDP)) {
 350:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ((struct udp_hdr *)((u8_t *)iphdr + IPH_HL_BYTES(iphdr)))->chksum = 0;
 351:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 352:ThirdPackage/lwip220/core/ipv4/ip4.c ****     break;
 353:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif
 354:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_TCP
 355:ThirdPackage/lwip220/core/ipv4/ip4.c ****   case IP_PROTO_TCP:
 356:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (CHECKSUM_GEN_TCP || NETIF_CHECKSUM_ENABLED(inp, NETIF_CHECKSUM_GEN_TCP)) {
 357:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ((struct tcp_hdr *)((u8_t *)iphdr + IPH_HL_BYTES(iphdr)))->chksum = 0;
 358:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 359:ThirdPackage/lwip220/core/ipv4/ip4.c ****     break;
 360:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif
 361:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_ICMP
 362:ThirdPackage/lwip220/core/ipv4/ip4.c ****   case IP_PROTO_ICMP:
 363:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (CHECKSUM_GEN_ICMP || NETIF_CHECKSUM_ENABLED(inp, NETIF_CHECKSUM_GEN_ICMP)) {
 364:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ((struct icmp_hdr *)((u8_t *)iphdr + IPH_HL_BYTES(iphdr)))->chksum = 0;
 365:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 366:ThirdPackage/lwip220/core/ipv4/ip4.c ****     break;
 367:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif
 368:ThirdPackage/lwip220/core/ipv4/ip4.c ****   default:
 369:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* there's really nothing to do here other than satisfying 'switch-default' */
 370:ThirdPackage/lwip220/core/ipv4/ip4.c ****     break;
 371:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 372:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 8


 373:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_DEBUGF(IP_DEBUG, ("ip4_forward: forwarding packet to %"U16_F".%"U16_F".%"U16_F".%"U16_F"\n",
 374:ThirdPackage/lwip220/core/ipv4/ip4.c ****                          ip4_addr1_16(ip4_current_dest_addr()), ip4_addr2_16(ip4_current_dest_addr(
 375:ThirdPackage/lwip220/core/ipv4/ip4.c ****                          ip4_addr3_16(ip4_current_dest_addr()), ip4_addr4_16(ip4_current_dest_addr(
 376:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 377:ThirdPackage/lwip220/core/ipv4/ip4.c ****   IP_STATS_INC(ip.fw);
 378:ThirdPackage/lwip220/core/ipv4/ip4.c ****   MIB2_STATS_INC(mib2.ipforwdatagrams);
 379:ThirdPackage/lwip220/core/ipv4/ip4.c ****   IP_STATS_INC(ip.xmit);
 380:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 381:ThirdPackage/lwip220/core/ipv4/ip4.c ****   PERF_STOP("ip4_forward");
 382:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* don't fragment if interface has mtu set to 0 [loopif] */
 383:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (netif->mtu && (p->tot_len > netif->mtu)) {
 384:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if ((IPH_OFFSET(iphdr) & PP_NTOHS(IP_DF)) == 0) {
 385:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_FRAG
 386:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_frag(p, netif, ip4_current_dest_addr());
 387:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else /* IP_FRAG */
 388:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* @todo: send ICMP Destination Unreachable code 13 "Communication administratively prohibite
 389:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_FRAG */
 390:ThirdPackage/lwip220/core/ipv4/ip4.c ****     } else {
 391:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_ICMP
 392:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* send ICMP Destination Unreachable code 4: "Fragmentation Needed and DF Set" */
 393:ThirdPackage/lwip220/core/ipv4/ip4.c ****       icmp_dest_unreach(p, ICMP_DUR_FRAG);
 394:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_ICMP */
 395:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 396:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return;
 397:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 398:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* transmit pbuf on chosen interface */
 399:ThirdPackage/lwip220/core/ipv4/ip4.c ****   netif->output(netif, p, ip4_current_dest_addr());
 400:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return;
 401:ThirdPackage/lwip220/core/ipv4/ip4.c **** return_noroute:
 402:ThirdPackage/lwip220/core/ipv4/ip4.c ****   MIB2_STATS_INC(mib2.ipoutnoroutes);
 403:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 404:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_FORWARD */
 405:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 406:ThirdPackage/lwip220/core/ipv4/ip4.c **** /** Return true if the current input packet should be accepted on this netif */
 407:ThirdPackage/lwip220/core/ipv4/ip4.c **** static int
 408:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_input_accept(struct netif *netif)
 409:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
  29              		.loc 1 409 1 view -0
  30              		.cfi_startproc
  31              		@ args = 0, pretend = 0, frame = 0
  32              		@ frame_needed = 0, uses_anonymous_args = 0
  33              		.loc 1 409 1 is_stmt 0 view .LVU1
  34 0000 08B5     		push	{r3, lr}
  35              	.LCFI0:
  36              		.cfi_def_cfa_offset 8
  37              		.cfi_offset 3, -8
  38              		.cfi_offset 14, -4
 410:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_DEBUGF(IP_DEBUG, ("ip_input: iphdr->dest 0x%"X32_F" netif->ip_addr 0x%"X32_F" (0x%"X32_F", 0
 411:ThirdPackage/lwip220/core/ipv4/ip4.c ****                          ip4_addr_get_u32(ip4_current_dest_addr()), ip4_addr_get_u32(netif_ip4_addr
 412:ThirdPackage/lwip220/core/ipv4/ip4.c ****                          ip4_addr_get_u32(ip4_current_dest_addr()) & ip4_addr_get_u32(netif_ip4_net
 413:ThirdPackage/lwip220/core/ipv4/ip4.c ****                          ip4_addr_get_u32(netif_ip4_addr(netif)) & ip4_addr_get_u32(netif_ip4_netma
 414:ThirdPackage/lwip220/core/ipv4/ip4.c ****                          ip4_addr_get_u32(ip4_current_dest_addr()) & ~ip4_addr_get_u32(netif_ip4_ne
  39              		.loc 1 414 115 is_stmt 1 view .LVU2
 415:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 416:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* interface is up and configured? */
 417:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if ((netif_is_up(netif)) && (!ip4_addr_isany_val(*netif_ip4_addr(netif)))) {
  40              		.loc 1 417 3 view .LVU3
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 9


  41              		.loc 1 417 8 is_stmt 0 view .LVU4
  42 0002 90F82D30 		ldrb	r3, [r0, #45]	@ zero_extendqisi2
  43              		.loc 1 417 6 view .LVU5
  44 0006 13F0010F 		tst	r3, #1
  45 000a 0DD0     		beq	.L4
  46 000c 0146     		mov	r1, r0
  47              		.loc 1 417 33 discriminator 1 view .LVU6
  48 000e 4368     		ldr	r3, [r0, #4]
  49              		.loc 1 417 28 discriminator 1 view .LVU7
  50 0010 63B1     		cbz	r3, .L5
 418:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* unicast to this interface address? */
 419:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (ip4_addr_eq(ip4_current_dest_addr(), netif_ip4_addr(netif)) ||
  51              		.loc 1 419 5 is_stmt 1 view .LVU8
  52              		.loc 1 419 9 is_stmt 0 view .LVU9
  53 0012 074A     		ldr	r2, .L8
  54 0014 5069     		ldr	r0, [r2, #20]
  55              	.LVL1:
  56              		.loc 1 419 8 view .LVU10
  57 0016 8342     		cmp	r3, r0
  58 0018 04D0     		beq	.L3
 420:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* or broadcast on this interface network address? */
 421:ThirdPackage/lwip220/core/ipv4/ip4.c ****         ip4_addr_isbroadcast(ip4_current_dest_addr(), netif)
  59              		.loc 1 421 9 discriminator 1 view .LVU11
  60 001a FFF7FEFF 		bl	ip4_addr_isbroadcast_u32
  61              	.LVL2:
 419:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* or broadcast on this interface network address? */
  62              		.loc 1 419 69 discriminator 1 view .LVU12
  63 001e 08B9     		cbnz	r0, .L3
 422:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_NETIF_LOOPBACK && !LWIP_HAVE_LOOPIF
 423:ThirdPackage/lwip220/core/ipv4/ip4.c ****         || (ip4_addr_get_u32(ip4_current_dest_addr()) == PP_HTONL(IPADDR_LOOPBACK))
 424:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_NETIF_LOOPBACK && !LWIP_HAVE_LOOPIF */
 425:ThirdPackage/lwip220/core/ipv4/ip4.c ****        ) {
 426:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG, ("ip4_input: packet accepted on interface %c%c\n",
 427:ThirdPackage/lwip220/core/ipv4/ip4.c ****                              netif->name[0], netif->name[1]));
 428:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* accept on this netif */
 429:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return 1;
 430:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 431:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_AUTOIP
 432:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* connections to link-local addresses must persist after changing
 433:ThirdPackage/lwip220/core/ipv4/ip4.c ****         the netif's address (RFC3927 ch. 1.9) */
 434:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (autoip_accept_packet(netif, ip4_current_dest_addr())) {
 435:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG, ("ip4_input: LLA packet accepted on interface %c%c\n",
 436:ThirdPackage/lwip220/core/ipv4/ip4.c ****                              netif->name[0], netif->name[1]));
 437:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* accept on this netif */
 438:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return 1;
 439:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 440:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_AUTOIP */
 441:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 442:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return 0;
  64              		.loc 1 442 10 view .LVU13
  65 0020 0020     		movs	r0, #0
  66 0022 02E0     		b	.L1
  67              	.L3:
 427:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* accept on this netif */
  68              		.loc 1 427 62 is_stmt 1 view .LVU14
 429:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
  69              		.loc 1 429 7 view .LVU15
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 10


 429:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
  70              		.loc 1 429 14 is_stmt 0 view .LVU16
  71 0024 0120     		movs	r0, #1
  72 0026 00E0     		b	.L1
  73              	.LVL3:
  74              	.L4:
  75              		.loc 1 442 10 view .LVU17
  76 0028 0020     		movs	r0, #0
  77              	.LVL4:
  78              	.L1:
 443:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
  79              		.loc 1 443 1 view .LVU18
  80 002a 08BD     		pop	{r3, pc}
  81              	.LVL5:
  82              	.L5:
 442:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
  83              		.loc 1 442 10 view .LVU19
  84 002c 0020     		movs	r0, #0
  85              	.LVL6:
 442:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
  86              		.loc 1 442 10 view .LVU20
  87 002e FCE7     		b	.L1
  88              	.L9:
  89              		.align	2
  90              	.L8:
  91 0030 00000000 		.word	ip_data
  92              		.cfi_endproc
  93              	.LFE161:
  95              		.section	.text.ip4_route,"ax",%progbits
  96              		.align	1
  97              		.global	ip4_route
  98              		.syntax unified
  99              		.thumb
 100              		.thumb_func
 102              	ip4_route:
 103              	.LVL7:
 104              	.LFB160:
 153:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if !LWIP_SINGLE_NETIF
 105              		.loc 1 153 1 is_stmt 1 view -0
 106              		.cfi_startproc
 107              		@ args = 0, pretend = 0, frame = 0
 108              		@ frame_needed = 0, uses_anonymous_args = 0
 109              		@ link register save eliminated.
 153:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if !LWIP_SINGLE_NETIF
 110              		.loc 1 153 1 is_stmt 0 view .LVU22
 111 0000 8446     		mov	ip, r0
 155:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 112              		.loc 1 155 3 is_stmt 1 view .LVU23
 157:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 113              		.loc 1 157 28 view .LVU24
 167:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 114              		.loc 1 167 3 view .LVU25
 170:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* is the netif up, does it have a link and a valid address? */
 115              		.loc 1 170 3 view .LVU26
 116 0002 284B     		ldr	r3, .L31
 117 0004 1868     		ldr	r0, [r3]
 118              	.LVL8:
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 11


 170:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* is the netif up, does it have a link and a valid address? */
 119              		.loc 1 170 3 is_stmt 0 view .LVU27
 120 0006 2DE0     		b	.L16
 121              	.L12:
 122              	.LCFI1:
 123              		.cfi_def_cfa_offset 4
 124              		.cfi_offset 4, -4
 170:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* is the netif up, does it have a link and a valid address? */
 125              		.loc 1 170 3 is_stmt 1 discriminator 2 view .LVU28
 126 0008 0068     		ldr	r0, [r0]
 127              	.LVL9:
 170:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* is the netif up, does it have a link and a valid address? */
 128              		.loc 1 170 3 discriminator 2 view .LVU29
 129 000a B8B1     		cbz	r0, .L29
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 130              		.loc 1 172 5 view .LVU30
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 131              		.loc 1 172 9 is_stmt 0 view .LVU31
 132 000c 90F82D30 		ldrb	r3, [r0, #45]	@ zero_extendqisi2
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 133              		.loc 1 172 8 view .LVU32
 134 0010 13F0010F 		tst	r3, #1
 135 0014 F8D0     		beq	.L12
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 136              		.loc 1 172 28 discriminator 1 view .LVU33
 137 0016 13F0040F 		tst	r3, #4
 138 001a F5D0     		beq	.L12
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 139              		.loc 1 172 59 discriminator 2 view .LVU34
 140 001c 4268     		ldr	r2, [r0, #4]
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 141              		.loc 1 172 55 discriminator 2 view .LVU35
 142 001e 002A     		cmp	r2, #0
 143 0020 F2D0     		beq	.L12
 144              	.L20:
 174:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* return netif on which to forward IP packet */
 145              		.loc 1 174 7 is_stmt 1 view .LVU36
 174:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* return netif on which to forward IP packet */
 146              		.loc 1 174 11 is_stmt 0 view .LVU37
 147 0022 DCF80010 		ldr	r1, [ip]
 148 0026 4A40     		eors	r2, r2, r1
 174:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* return netif on which to forward IP packet */
 149              		.loc 1 174 10 view .LVU38
 150 0028 8468     		ldr	r4, [r0, #8]
 151 002a 2242     		tst	r2, r4
 152 002c 16D0     		beq	.L10
 179:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* return netif on which to forward IP packet */
 153              		.loc 1 179 7 is_stmt 1 view .LVU39
 179:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* return netif on which to forward IP packet */
 154              		.loc 1 179 10 is_stmt 0 view .LVU40
 155 002e 13F0020F 		tst	r3, #2
 156 0032 E9D1     		bne	.L12
 179:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* return netif on which to forward IP packet */
 157              		.loc 1 179 59 discriminator 1 view .LVU41
 158 0034 C368     		ldr	r3, [r0, #12]
 179:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* return netif on which to forward IP packet */
 159              		.loc 1 179 56 discriminator 1 view .LVU42
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 12


 160 0036 9942     		cmp	r1, r3
 161 0038 E6D1     		bne	.L12
 162 003a 0FE0     		b	.L10
 163              	.L29:
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 164              		.loc 1 216 3 is_stmt 1 view .LVU43
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 165              		.loc 1 216 22 is_stmt 0 view .LVU44
 166 003c 1A4B     		ldr	r3, .L31+4
 167 003e 1B68     		ldr	r3, [r3]
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 168              		.loc 1 216 6 view .LVU45
 169 0040 63B1     		cbz	r3, .L10
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 170              		.loc 1 216 35 discriminator 1 view .LVU46
 171 0042 93F82D20 		ldrb	r2, [r3, #45]	@ zero_extendqisi2
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 172              		.loc 1 216 62 discriminator 1 view .LVU47
 173 0046 02F00502 		and	r2, r2, #5
 174 004a 052A     		cmp	r2, #5
 175 004c 06D1     		bne	.L10
 217:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* No matching netif found and default netif is not usable.
 176              		.loc 1 217 7 discriminator 2 view .LVU48
 177 004e 5A68     		ldr	r2, [r3, #4]
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 178              		.loc 1 216 98 discriminator 2 view .LVU49
 179 0050 22B1     		cbz	r2, .L10
 217:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* No matching netif found and default netif is not usable.
 180              		.loc 1 217 61 view .LVU50
 181 0052 9CF80020 		ldrb	r2, [ip]	@ zero_extendqisi2
 217:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* No matching netif found and default netif is not usable.
 182              		.loc 1 217 58 view .LVU51
 183 0056 7F2A     		cmp	r2, #127
 184 0058 00D0     		beq	.L10
 227:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 185              		.loc 1 227 10 view .LVU52
 186 005a 1846     		mov	r0, r3
 187              	.LVL10:
 188              	.L10:
 228:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 189              		.loc 1 228 1 view .LVU53
 190 005c 5DF8044B 		ldr	r4, [sp], #4
 191              	.LCFI2:
 192              		.cfi_restore 4
 193              		.cfi_def_cfa_offset 0
 194 0060 7047     		bx	lr
 195              	.LVL11:
 196              	.L18:
 170:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* is the netif up, does it have a link and a valid address? */
 197              		.loc 1 170 3 is_stmt 1 view .LVU54
 198 0062 0068     		ldr	r0, [r0]
 199              	.LVL12:
 200              	.L16:
 170:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* is the netif up, does it have a link and a valid address? */
 201              		.loc 1 170 3 view .LVU55
 202 0064 60B1     		cbz	r0, .L30
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 13


 203              		.loc 1 172 5 view .LVU56
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 204              		.loc 1 172 9 is_stmt 0 view .LVU57
 205 0066 90F82D30 		ldrb	r3, [r0, #45]	@ zero_extendqisi2
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 206              		.loc 1 172 8 view .LVU58
 207 006a 13F0010F 		tst	r3, #1
 208 006e F8D0     		beq	.L18
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 209              		.loc 1 172 28 view .LVU59
 210 0070 13F0040F 		tst	r3, #4
 211 0074 F5D0     		beq	.L18
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 212              		.loc 1 172 59 view .LVU60
 213 0076 4268     		ldr	r2, [r0, #4]
 172:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* network mask matches? */
 214              		.loc 1 172 55 view .LVU61
 215 0078 002A     		cmp	r2, #0
 216 007a F2D0     		beq	.L18
 153:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if !LWIP_SINGLE_NETIF
 217              		.loc 1 153 1 view .LVU62
 218 007c 10B4     		push	{r4}
 219              	.LCFI3:
 220              		.cfi_def_cfa_offset 4
 221              		.cfi_offset 4, -4
 222 007e D0E7     		b	.L20
 223              	.L30:
 224              	.LCFI4:
 225              		.cfi_def_cfa_offset 0
 226              		.cfi_restore 4
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 227              		.loc 1 216 3 is_stmt 1 view .LVU63
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 228              		.loc 1 216 22 is_stmt 0 view .LVU64
 229 0080 094B     		ldr	r3, .L31+4
 230 0082 1B68     		ldr	r3, [r3]
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 231              		.loc 1 216 6 view .LVU65
 232 0084 6BB1     		cbz	r3, .L23
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 233              		.loc 1 216 35 view .LVU66
 234 0086 93F82D20 		ldrb	r2, [r3, #45]	@ zero_extendqisi2
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 235              		.loc 1 216 62 view .LVU67
 236 008a 02F00502 		and	r2, r2, #5
 237 008e 052A     		cmp	r2, #5
 238 0090 07D1     		bne	.L23
 217:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* No matching netif found and default netif is not usable.
 239              		.loc 1 217 7 view .LVU68
 240 0092 5A68     		ldr	r2, [r3, #4]
 216:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_isany_val(*netif_ip4_addr(netif_default)) || ip4_addr_isloopback(dest)) {
 241              		.loc 1 216 98 view .LVU69
 242 0094 2AB1     		cbz	r2, .L23
 217:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* No matching netif found and default netif is not usable.
 243              		.loc 1 217 61 view .LVU70
 244 0096 9CF80020 		ldrb	r2, [ip]	@ zero_extendqisi2
 217:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* No matching netif found and default netif is not usable.
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 14


 245              		.loc 1 217 58 view .LVU71
 246 009a 7F2A     		cmp	r2, #127
 247 009c 01D0     		beq	.L23
 227:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 248              		.loc 1 227 10 view .LVU72
 249 009e 1846     		mov	r0, r3
 250              	.LVL13:
 227:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 251              		.loc 1 227 10 view .LVU73
 252 00a0 7047     		bx	lr
 253              	.LVL14:
 254              	.L23:
 228:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 255              		.loc 1 228 1 view .LVU74
 256 00a2 7047     		bx	lr
 257              	.L32:
 258              		.align	2
 259              	.L31:
 260 00a4 00000000 		.word	netif_list
 261 00a8 00000000 		.word	netif_default
 262              		.cfi_endproc
 263              	.LFE160:
 265              		.section	.text.ip4_input,"ax",%progbits
 266              		.align	1
 267              		.global	ip4_input
 268              		.syntax unified
 269              		.thumb
 270              		.thumb_func
 272              	ip4_input:
 273              	.LVL15:
 274              	.LFB162:
 444:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 445:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
 446:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * This function is called by the network interface device driver when
 447:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * an IP packet is received. The function does the basic checks of the
 448:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * IP header such as packet size being at least larger than the header
 449:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * size etc. If the packet was not destined for us, the packet is
 450:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * forwarded (using ip_forward). The IP checksum is always checked.
 451:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
 452:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Finally, the packet is sent to the upper layer protocol input function.
 453:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
 454:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param p the received IP packet (p->payload points to IP header)
 455:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param inp the netif on which this packet was received
 456:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @return ERR_OK if the packet was processed (could return ERR_* if it wasn't
 457:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *         processed, but currently always returns ERR_OK)
 458:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
 459:ThirdPackage/lwip220/core/ipv4/ip4.c **** err_t
 460:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_input(struct pbuf *p, struct netif *inp)
 461:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
 275              		.loc 1 461 1 is_stmt 1 view -0
 276              		.cfi_startproc
 277              		@ args = 0, pretend = 0, frame = 0
 278              		@ frame_needed = 0, uses_anonymous_args = 0
 279              		.loc 1 461 1 is_stmt 0 view .LVU76
 280 0000 2DE9F843 		push	{r3, r4, r5, r6, r7, r8, r9, lr}
 281              	.LCFI5:
 282              		.cfi_def_cfa_offset 32
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 15


 283              		.cfi_offset 3, -32
 284              		.cfi_offset 4, -28
 285              		.cfi_offset 5, -24
 286              		.cfi_offset 6, -20
 287              		.cfi_offset 7, -16
 288              		.cfi_offset 8, -12
 289              		.cfi_offset 9, -8
 290              		.cfi_offset 14, -4
 291 0004 0446     		mov	r4, r0
 462:ThirdPackage/lwip220/core/ipv4/ip4.c ****   const struct ip_hdr *iphdr;
 292              		.loc 1 462 3 is_stmt 1 view .LVU77
 463:ThirdPackage/lwip220/core/ipv4/ip4.c ****   struct netif *netif;
 293              		.loc 1 463 3 view .LVU78
 464:ThirdPackage/lwip220/core/ipv4/ip4.c ****   u16_t iphdr_hlen;
 294              		.loc 1 464 3 view .LVU79
 465:ThirdPackage/lwip220/core/ipv4/ip4.c ****   u16_t iphdr_len;
 295              		.loc 1 465 3 view .LVU80
 466:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_ACCEPT_LINK_LAYER_ADDRESSING || LWIP_IGMP
 467:ThirdPackage/lwip220/core/ipv4/ip4.c ****   int check_ip_src = 1;
 468:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_ACCEPT_LINK_LAYER_ADDRESSING || LWIP_IGMP */
 469:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_RAW
 470:ThirdPackage/lwip220/core/ipv4/ip4.c ****   raw_input_state_t raw_status;
 471:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_RAW */
 472:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 473:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_ASSERT_CORE_LOCKED();
 296              		.loc 1 473 28 view .LVU81
 474:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 475:ThirdPackage/lwip220/core/ipv4/ip4.c ****   IP_STATS_INC(ip.recv);
 297              		.loc 1 475 24 view .LVU82
 476:ThirdPackage/lwip220/core/ipv4/ip4.c ****   MIB2_STATS_INC(mib2.ipinreceives);
 298              		.loc 1 476 36 view .LVU83
 477:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 478:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* identify the IP header */
 479:ThirdPackage/lwip220/core/ipv4/ip4.c ****   iphdr = (struct ip_hdr *)p->payload;
 299              		.loc 1 479 3 view .LVU84
 300              		.loc 1 479 9 is_stmt 0 view .LVU85
 301 0006 D0F80480 		ldr	r8, [r0, #4]
 302              	.LVL16:
 480:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (IPH_V(iphdr) != 4) {
 303              		.loc 1 480 3 is_stmt 1 view .LVU86
 304              		.loc 1 480 7 is_stmt 0 view .LVU87
 305 000a 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 306              		.loc 1 480 20 view .LVU88
 307 000e 1A09     		lsrs	r2, r3, #4
 308              		.loc 1 480 6 view .LVU89
 309 0010 042A     		cmp	r2, #4
 310 0012 04D0     		beq	.L34
 481:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_WARNING, ("IP packet dropped due to bad version number %"
 311              		.loc 1 481 132 is_stmt 1 view .LVU90
 482:ThirdPackage/lwip220/core/ipv4/ip4.c ****     ip4_debug_print(p);
 312              		.loc 1 482 23 view .LVU91
 483:ThirdPackage/lwip220/core/ipv4/ip4.c ****     pbuf_free(p);
 313              		.loc 1 483 5 view .LVU92
 314 0014 FFF7FEFF 		bl	pbuf_free
 315              	.LVL17:
 484:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.err);
 316              		.loc 1 484 25 view .LVU93
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 16


 485:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.drop);
 317              		.loc 1 485 26 view .LVU94
 486:ThirdPackage/lwip220/core/ipv4/ip4.c ****     MIB2_STATS_INC(mib2.ipinhdrerrors);
 318              		.loc 1 486 39 view .LVU95
 487:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ERR_OK;
 319              		.loc 1 487 5 view .LVU96
 320              	.L35:
 488:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 489:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 490:ThirdPackage/lwip220/core/ipv4/ip4.c **** #ifdef LWIP_HOOK_IP4_INPUT
 491:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (LWIP_HOOK_IP4_INPUT(p, inp)) {
 492:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* the packet has been eaten */
 493:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ERR_OK;
 494:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 495:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif
 496:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 497:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* obtain IP header length in bytes */
 498:ThirdPackage/lwip220/core/ipv4/ip4.c ****   iphdr_hlen = IPH_HL_BYTES(iphdr);
 499:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* obtain ip length in bytes */
 500:ThirdPackage/lwip220/core/ipv4/ip4.c ****   iphdr_len = lwip_ntohs(IPH_LEN(iphdr));
 501:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 502:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* Trim pbuf. This is especially required for packets < 60 bytes. */
 503:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (iphdr_len < p->tot_len) {
 504:ThirdPackage/lwip220/core/ipv4/ip4.c ****     pbuf_realloc(p, iphdr_len);
 505:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 506:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 507:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* header length exceeds first pbuf length, or ip length exceeds total pbuf length? */
 508:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if ((iphdr_hlen > p->len) || (iphdr_len > p->tot_len) || (iphdr_hlen < IP_HLEN)) {
 509:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (iphdr_hlen < IP_HLEN) {
 510:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 511:ThirdPackage/lwip220/core/ipv4/ip4.c ****                   ("ip4_input: short IP header (%"U16_F" bytes) received, IP packet dropped\n", iph
 512:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 513:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (iphdr_hlen > p->len) {
 514:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 515:ThirdPackage/lwip220/core/ipv4/ip4.c ****                   ("IP header (len %"U16_F") does not fit in first pbuf (len %"U16_F"), IP packet d
 516:ThirdPackage/lwip220/core/ipv4/ip4.c ****                    iphdr_hlen, p->len));
 517:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 518:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (iphdr_len > p->tot_len) {
 519:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 520:ThirdPackage/lwip220/core/ipv4/ip4.c ****                   ("IP (len %"U16_F") is longer than pbuf (len %"U16_F"), IP packet dropped.\n",
 521:ThirdPackage/lwip220/core/ipv4/ip4.c ****                    iphdr_len, p->tot_len));
 522:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 523:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* free (drop) packet pbufs */
 524:ThirdPackage/lwip220/core/ipv4/ip4.c ****     pbuf_free(p);
 525:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.lenerr);
 526:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.drop);
 527:ThirdPackage/lwip220/core/ipv4/ip4.c ****     MIB2_STATS_INC(mib2.ipindiscards);
 528:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ERR_OK;
 529:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 530:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 531:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* verify checksum */
 532:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if CHECKSUM_CHECK_IP
 533:ThirdPackage/lwip220/core/ipv4/ip4.c ****   IF__NETIF_CHECKSUM_ENABLED(inp, NETIF_CHECKSUM_CHECK_IP) {
 534:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (inet_chksum(iphdr, iphdr_hlen) != 0) {
 535:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 536:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 537:ThirdPackage/lwip220/core/ipv4/ip4.c ****                   ("Checksum (0x%"X16_F") failed, IP packet dropped.\n", inet_chksum(iphdr, iphdr_h
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 17


 538:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_debug_print(p);
 539:ThirdPackage/lwip220/core/ipv4/ip4.c ****       pbuf_free(p);
 540:ThirdPackage/lwip220/core/ipv4/ip4.c ****       IP_STATS_INC(ip.chkerr);
 541:ThirdPackage/lwip220/core/ipv4/ip4.c ****       IP_STATS_INC(ip.drop);
 542:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MIB2_STATS_INC(mib2.ipinhdrerrors);
 543:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return ERR_OK;
 544:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 545:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 546:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif
 547:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 548:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* copy IP addresses to aligned ip_addr_t */
 549:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_addr_copy_from_ip4(ip_data.current_iphdr_dest, iphdr->dest);
 550:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_addr_copy_from_ip4(ip_data.current_iphdr_src, iphdr->src);
 551:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 552:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* match packet against an interface, i.e. is this packet for us? */
 553:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (ip4_addr_ismulticast(ip4_current_dest_addr())) {
 554:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_IGMP
 555:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if ((inp->flags & NETIF_FLAG_IGMP) && (igmp_lookfor_group(inp, ip4_current_dest_addr()))) {
 556:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* IGMP snooping switches need 0.0.0.0 to be allowed as source address (RFC 4541) */
 557:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_t allsystems;
 558:ThirdPackage/lwip220/core/ipv4/ip4.c ****       IP4_ADDR(&allsystems, 224, 0, 0, 1);
 559:ThirdPackage/lwip220/core/ipv4/ip4.c ****       if (ip4_addr_eq(ip4_current_dest_addr(), &allsystems) &&
 560:ThirdPackage/lwip220/core/ipv4/ip4.c ****           ip4_addr_isany(ip4_current_src_addr())) {
 561:ThirdPackage/lwip220/core/ipv4/ip4.c ****         check_ip_src = 0;
 562:ThirdPackage/lwip220/core/ipv4/ip4.c ****       }
 563:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = inp;
 564:ThirdPackage/lwip220/core/ipv4/ip4.c ****     } else {
 565:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = NULL;
 566:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 567:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else /* LWIP_IGMP */
 568:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if ((netif_is_up(inp)) && (!ip4_addr_isany_val(*netif_ip4_addr(inp)))) {
 569:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = inp;
 570:ThirdPackage/lwip220/core/ipv4/ip4.c ****     } else {
 571:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = NULL;
 572:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 573:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_IGMP */
 574:ThirdPackage/lwip220/core/ipv4/ip4.c ****   } else {
 575:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* start trying with inp. if that's not acceptable, start walking the
 576:ThirdPackage/lwip220/core/ipv4/ip4.c ****        list of configured netifs. */
 577:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (ip4_input_accept(inp)) {
 578:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = inp;
 579:ThirdPackage/lwip220/core/ipv4/ip4.c ****     } else {
 580:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = NULL;
 581:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if !LWIP_NETIF_LOOPBACK || LWIP_HAVE_LOOPIF
 582:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* Packets sent to the loopback address must not be accepted on an
 583:ThirdPackage/lwip220/core/ipv4/ip4.c ****        * interface that does not have the loopback address assigned to it,
 584:ThirdPackage/lwip220/core/ipv4/ip4.c ****        * unless a non-loopback interface is used for loopback traffic. */
 585:ThirdPackage/lwip220/core/ipv4/ip4.c ****       if (!ip4_addr_isloopback(ip4_current_dest_addr()))
 586:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* !LWIP_NETIF_LOOPBACK || LWIP_HAVE_LOOPIF */
 587:ThirdPackage/lwip220/core/ipv4/ip4.c ****       {
 588:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if !LWIP_SINGLE_NETIF
 589:ThirdPackage/lwip220/core/ipv4/ip4.c ****         NETIF_FOREACH(netif) {
 590:ThirdPackage/lwip220/core/ipv4/ip4.c ****           if (netif == inp) {
 591:ThirdPackage/lwip220/core/ipv4/ip4.c ****             /* we checked that before already */
 592:ThirdPackage/lwip220/core/ipv4/ip4.c ****             continue;
 593:ThirdPackage/lwip220/core/ipv4/ip4.c ****           }
 594:ThirdPackage/lwip220/core/ipv4/ip4.c ****           if (ip4_input_accept(netif)) {
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 18


 595:ThirdPackage/lwip220/core/ipv4/ip4.c ****             break;
 596:ThirdPackage/lwip220/core/ipv4/ip4.c ****           }
 597:ThirdPackage/lwip220/core/ipv4/ip4.c ****         }
 598:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* !LWIP_SINGLE_NETIF */
 599:ThirdPackage/lwip220/core/ipv4/ip4.c ****       }
 600:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 601:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 602:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 603:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_ACCEPT_LINK_LAYER_ADDRESSING
 604:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* Pass DHCP messages regardless of destination address. DHCP traffic is addressed
 605:ThirdPackage/lwip220/core/ipv4/ip4.c ****    * using link layer addressing (such as Ethernet MAC) so we must not filter on IP.
 606:ThirdPackage/lwip220/core/ipv4/ip4.c ****    * According to RFC 1542 section 3.1.1, referred by RFC 2131).
 607:ThirdPackage/lwip220/core/ipv4/ip4.c ****    *
 608:ThirdPackage/lwip220/core/ipv4/ip4.c ****    * If you want to accept private broadcast communication while a netif is down,
 609:ThirdPackage/lwip220/core/ipv4/ip4.c ****    * define LWIP_IP_ACCEPT_UDP_PORT(dst_port), e.g.:
 610:ThirdPackage/lwip220/core/ipv4/ip4.c ****    *
 611:ThirdPackage/lwip220/core/ipv4/ip4.c ****    * #define LWIP_IP_ACCEPT_UDP_PORT(dst_port) ((dst_port) == PP_NTOHS(12345))
 612:ThirdPackage/lwip220/core/ipv4/ip4.c ****    */
 613:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (netif == NULL) {
 614:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* remote port is DHCP server? */
 615:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (IPH_PROTO(iphdr) == IP_PROTO_UDP) {
 616:ThirdPackage/lwip220/core/ipv4/ip4.c ****       const struct udp_hdr *udphdr = (const struct udp_hdr *)((const u8_t *)iphdr + iphdr_hlen);
 617:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_TRACE, ("ip4_input: UDP packet to DHCP client port %"U16_F"\n
 618:ThirdPackage/lwip220/core/ipv4/ip4.c ****                                               lwip_ntohs(udphdr->dest)));
 619:ThirdPackage/lwip220/core/ipv4/ip4.c ****       if (IP_ACCEPT_LINK_LAYER_ADDRESSED_PORT(udphdr->dest)) {
 620:ThirdPackage/lwip220/core/ipv4/ip4.c ****         LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_TRACE, ("ip4_input: DHCP packet accepted.\n"));
 621:ThirdPackage/lwip220/core/ipv4/ip4.c ****         netif = inp;
 622:ThirdPackage/lwip220/core/ipv4/ip4.c ****         check_ip_src = 0;
 623:ThirdPackage/lwip220/core/ipv4/ip4.c ****       }
 624:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 625:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 626:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_ACCEPT_LINK_LAYER_ADDRESSING */
 627:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 628:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* broadcast or multicast packet source address? Compliant with RFC 1122: 3.2.1.3 */
 629:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_IGMP || IP_ACCEPT_LINK_LAYER_ADDRESSING
 630:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (check_ip_src
 631:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_ACCEPT_LINK_LAYER_ADDRESSING
 632:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* DHCP servers need 0.0.0.0 to be allowed as source address (RFC 1.1.2.2: 3.2.1.3/a) */
 633:ThirdPackage/lwip220/core/ipv4/ip4.c ****       && !ip4_addr_isany_val(*ip4_current_src_addr())
 634:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_ACCEPT_LINK_LAYER_ADDRESSING */
 635:ThirdPackage/lwip220/core/ipv4/ip4.c ****      )
 636:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_IGMP || IP_ACCEPT_LINK_LAYER_ADDRESSING */
 637:ThirdPackage/lwip220/core/ipv4/ip4.c ****   {
 638:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if ((ip4_addr_isbroadcast(ip4_current_src_addr(), inp)) ||
 639:ThirdPackage/lwip220/core/ipv4/ip4.c ****         (ip4_addr_ismulticast(ip4_current_src_addr()))) {
 640:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* packet source is not valid */
 641:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_TRACE | LWIP_DBG_LEVEL_WARNING, ("ip4_input: packet source is
 642:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* free (drop) packet pbufs */
 643:ThirdPackage/lwip220/core/ipv4/ip4.c ****       pbuf_free(p);
 644:ThirdPackage/lwip220/core/ipv4/ip4.c ****       IP_STATS_INC(ip.drop);
 645:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MIB2_STATS_INC(mib2.ipinaddrerrors);
 646:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MIB2_STATS_INC(mib2.ipindiscards);
 647:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return ERR_OK;
 648:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 649:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 650:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 651:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* packet not for us? */
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 19


 652:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (netif == NULL) {
 653:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* packet not for us, route or discard */
 654:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_TRACE, ("ip4_input: packet not for us.\n"));
 655:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_FORWARD
 656:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* non-broadcast packet? */
 657:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (!ip4_addr_isbroadcast(ip4_current_dest_addr(), inp)) {
 658:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* try to forward IP packet on (other) interfaces */
 659:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_forward(p, (struct ip_hdr *)p->payload, inp);
 660:ThirdPackage/lwip220/core/ipv4/ip4.c ****     } else
 661:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_FORWARD */
 662:ThirdPackage/lwip220/core/ipv4/ip4.c ****     {
 663:ThirdPackage/lwip220/core/ipv4/ip4.c ****       IP_STATS_INC(ip.drop);
 664:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MIB2_STATS_INC(mib2.ipinaddrerrors);
 665:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MIB2_STATS_INC(mib2.ipindiscards);
 666:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 667:ThirdPackage/lwip220/core/ipv4/ip4.c ****     pbuf_free(p);
 668:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ERR_OK;
 669:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 670:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* packet consists of multiple fragments? */
 671:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if ((IPH_OFFSET(iphdr) & PP_HTONS(IP_OFFMASK | IP_MF)) != 0) {
 672:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_REASSEMBLY /* packet fragment reassembly code present? */
 673:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_DEBUGF(IP_DEBUG, ("IP packet is a fragment (id=0x%04"X16_F" tot_len=%"U16_F" len=%"U16_F" 
 674:ThirdPackage/lwip220/core/ipv4/ip4.c ****                            lwip_ntohs(IPH_ID(iphdr)), p->tot_len, lwip_ntohs(IPH_LEN(iphdr)), (u16_
 675:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* reassemble the packet*/
 676:ThirdPackage/lwip220/core/ipv4/ip4.c ****     p = ip4_reass(p);
 677:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* packet not fully reassembled yet? */
 678:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (p == NULL) {
 679:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return ERR_OK;
 680:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 681:ThirdPackage/lwip220/core/ipv4/ip4.c ****     iphdr = (const struct ip_hdr *)p->payload;
 682:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else /* IP_REASSEMBLY == 0, no packet fragment reassembly code present */
 683:ThirdPackage/lwip220/core/ipv4/ip4.c ****     pbuf_free(p);
 684:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("IP packet dropped since it was fragmented (0x%
 685:ThirdPackage/lwip220/core/ipv4/ip4.c ****                 lwip_ntohs(IPH_OFFSET(iphdr))));
 686:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.opterr);
 687:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.drop);
 688:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* unsupported protocol feature */
 689:ThirdPackage/lwip220/core/ipv4/ip4.c ****     MIB2_STATS_INC(mib2.ipinunknownprotos);
 690:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ERR_OK;
 691:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_REASSEMBLY */
 692:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 693:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 694:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_OPTIONS_ALLOWED == 0 /* no support for IP options in the IP header? */
 695:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 696:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_IGMP
 697:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* there is an extra "router alert" option in IGMP messages which we allow for but do not police 
 698:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if ((iphdr_hlen > IP_HLEN) &&  (IPH_PROTO(iphdr) != IP_PROTO_IGMP)) {
 699:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else
 700:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (iphdr_hlen > IP_HLEN) {
 701:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_IGMP */
 702:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("IP packet dropped since there were IP options 
 703:ThirdPackage/lwip220/core/ipv4/ip4.c ****     pbuf_free(p);
 704:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.opterr);
 705:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.drop);
 706:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* unsupported protocol feature */
 707:ThirdPackage/lwip220/core/ipv4/ip4.c ****     MIB2_STATS_INC(mib2.ipinunknownprotos);
 708:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ERR_OK;
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 20


 709:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 710:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_OPTIONS_ALLOWED == 0 */
 711:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 712:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* send to upper layers */
 713:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_DEBUGF(IP_DEBUG, ("ip4_input: \n"));
 714:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip4_debug_print(p);
 715:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_DEBUGF(IP_DEBUG, ("ip4_input: p->len %"U16_F" p->tot_len %"U16_F"\n", p->len, p->tot_len));
 716:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 717:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_netif = netif;
 718:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_input_netif = inp;
 719:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip4_header = iphdr;
 720:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip_header_tot_len = IPH_HL_BYTES(iphdr);
 721:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 722:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_RAW
 723:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* raw input did not eat the packet? */
 724:ThirdPackage/lwip220/core/ipv4/ip4.c ****   raw_status = raw_input(p, inp);
 725:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (raw_status != RAW_INPUT_EATEN)
 726:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_RAW */
 727:ThirdPackage/lwip220/core/ipv4/ip4.c ****   {
 728:ThirdPackage/lwip220/core/ipv4/ip4.c ****     pbuf_remove_header(p, iphdr_hlen); /* Move to payload, no check necessary. */
 729:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 730:ThirdPackage/lwip220/core/ipv4/ip4.c ****     switch (IPH_PROTO(iphdr)) {
 731:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_UDP
 732:ThirdPackage/lwip220/core/ipv4/ip4.c ****       case IP_PROTO_UDP:
 733:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_UDPLITE
 734:ThirdPackage/lwip220/core/ipv4/ip4.c ****       case IP_PROTO_UDPLITE:
 735:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_UDPLITE */
 736:ThirdPackage/lwip220/core/ipv4/ip4.c ****         MIB2_STATS_INC(mib2.ipindelivers);
 737:ThirdPackage/lwip220/core/ipv4/ip4.c ****         udp_input(p, inp);
 738:ThirdPackage/lwip220/core/ipv4/ip4.c ****         break;
 739:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_UDP */
 740:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_TCP
 741:ThirdPackage/lwip220/core/ipv4/ip4.c ****       case IP_PROTO_TCP:
 742:ThirdPackage/lwip220/core/ipv4/ip4.c ****         MIB2_STATS_INC(mib2.ipindelivers);
 743:ThirdPackage/lwip220/core/ipv4/ip4.c ****         tcp_input(p, inp);
 744:ThirdPackage/lwip220/core/ipv4/ip4.c ****         break;
 745:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_TCP */
 746:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_ICMP
 747:ThirdPackage/lwip220/core/ipv4/ip4.c ****       case IP_PROTO_ICMP:
 748:ThirdPackage/lwip220/core/ipv4/ip4.c ****         MIB2_STATS_INC(mib2.ipindelivers);
 749:ThirdPackage/lwip220/core/ipv4/ip4.c ****         icmp_input(p, inp);
 750:ThirdPackage/lwip220/core/ipv4/ip4.c ****         break;
 751:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_ICMP */
 752:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_IGMP
 753:ThirdPackage/lwip220/core/ipv4/ip4.c ****       case IP_PROTO_IGMP:
 754:ThirdPackage/lwip220/core/ipv4/ip4.c ****         igmp_input(p, inp, ip4_current_dest_addr());
 755:ThirdPackage/lwip220/core/ipv4/ip4.c ****         break;
 756:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_IGMP */
 757:ThirdPackage/lwip220/core/ipv4/ip4.c ****       default:
 758:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_RAW
 759:ThirdPackage/lwip220/core/ipv4/ip4.c ****         if (raw_status == RAW_INPUT_DELIVERED) {
 760:ThirdPackage/lwip220/core/ipv4/ip4.c ****           MIB2_STATS_INC(mib2.ipindelivers);
 761:ThirdPackage/lwip220/core/ipv4/ip4.c ****         } else
 762:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_RAW */
 763:ThirdPackage/lwip220/core/ipv4/ip4.c ****         {
 764:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_ICMP
 765:ThirdPackage/lwip220/core/ipv4/ip4.c ****           /* send ICMP destination protocol unreachable unless is was a broadcast */
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 21


 766:ThirdPackage/lwip220/core/ipv4/ip4.c ****           if (!ip4_addr_isbroadcast(ip4_current_dest_addr(), netif) &&
 767:ThirdPackage/lwip220/core/ipv4/ip4.c ****               !ip4_addr_ismulticast(ip4_current_dest_addr())) {
 768:ThirdPackage/lwip220/core/ipv4/ip4.c ****             pbuf_header_force(p, (s16_t)iphdr_hlen); /* Move to ip header, no check necessary. */
 769:ThirdPackage/lwip220/core/ipv4/ip4.c ****             icmp_dest_unreach(p, ICMP_DUR_PROTO);
 770:ThirdPackage/lwip220/core/ipv4/ip4.c ****           }
 771:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_ICMP */
 772:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 773:ThirdPackage/lwip220/core/ipv4/ip4.c ****           LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("Unsupported transport protocol %"U16_F"\
 774:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 775:ThirdPackage/lwip220/core/ipv4/ip4.c ****           IP_STATS_INC(ip.proterr);
 776:ThirdPackage/lwip220/core/ipv4/ip4.c ****           IP_STATS_INC(ip.drop);
 777:ThirdPackage/lwip220/core/ipv4/ip4.c ****           MIB2_STATS_INC(mib2.ipinunknownprotos);
 778:ThirdPackage/lwip220/core/ipv4/ip4.c ****         }
 779:ThirdPackage/lwip220/core/ipv4/ip4.c ****         pbuf_free(p);
 780:ThirdPackage/lwip220/core/ipv4/ip4.c ****         break;
 781:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 782:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 783:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 784:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* @todo: this is not really necessary... */
 785:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_netif = NULL;
 786:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_input_netif = NULL;
 787:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip4_header = NULL;
 788:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip_header_tot_len = 0;
 789:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip4_addr_set_any(ip4_current_src_addr());
 790:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip4_addr_set_any(ip4_current_dest_addr());
 791:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 792:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return ERR_OK;
 793:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 321              		.loc 1 793 1 is_stmt 0 view .LVU97
 322 0018 0020     		movs	r0, #0
 323 001a BDE8F883 		pop	{r3, r4, r5, r6, r7, r8, r9, pc}
 324              	.LVL18:
 325              	.L34:
 326              		.loc 1 793 1 view .LVU98
 327 001e 0F46     		mov	r7, r1
 498:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* obtain ip length in bytes */
 328              		.loc 1 498 3 is_stmt 1 view .LVU99
 498:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* obtain ip length in bytes */
 329              		.loc 1 498 16 is_stmt 0 view .LVU100
 330 0020 03F00F03 		and	r3, r3, #15
 331 0024 4FEA8309 		lsl	r9, r3, #2
 498:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* obtain ip length in bytes */
 332              		.loc 1 498 14 view .LVU101
 333 0028 4D46     		mov	r5, r9
 334              	.LVL19:
 500:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 335              		.loc 1 500 3 is_stmt 1 view .LVU102
 500:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 336              		.loc 1 500 15 is_stmt 0 view .LVU103
 337 002a B8F80200 		ldrh	r0, [r8, #2]	@ unaligned
 338              	.LVL20:
 500:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 339              		.loc 1 500 15 view .LVU104
 340 002e FFF7FEFF 		bl	lwip_htons
 341              	.LVL21:
 500:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 342              		.loc 1 500 15 view .LVU105
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 22


 343 0032 0646     		mov	r6, r0
 344              	.LVL22:
 503:ThirdPackage/lwip220/core/ipv4/ip4.c ****     pbuf_realloc(p, iphdr_len);
 345              		.loc 1 503 3 is_stmt 1 view .LVU106
 503:ThirdPackage/lwip220/core/ipv4/ip4.c ****     pbuf_realloc(p, iphdr_len);
 346              		.loc 1 503 20 is_stmt 0 view .LVU107
 347 0034 2389     		ldrh	r3, [r4, #8]
 503:ThirdPackage/lwip220/core/ipv4/ip4.c ****     pbuf_realloc(p, iphdr_len);
 348              		.loc 1 503 6 view .LVU108
 349 0036 8342     		cmp	r3, r0
 350 0038 1CD8     		bhi	.L60
 351              	.LVL23:
 352              	.L36:
 508:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (iphdr_hlen < IP_HLEN) {
 353              		.loc 1 508 3 is_stmt 1 view .LVU109
 508:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (iphdr_hlen < IP_HLEN) {
 354              		.loc 1 508 22 is_stmt 0 view .LVU110
 355 003a 6389     		ldrh	r3, [r4, #10]
 508:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (iphdr_hlen < IP_HLEN) {
 356              		.loc 1 508 6 view .LVU111
 357 003c AB42     		cmp	r3, r5
 358 003e 1ED3     		bcc	.L37
 508:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (iphdr_hlen < IP_HLEN) {
 359              		.loc 1 508 46 discriminator 1 view .LVU112
 360 0040 2389     		ldrh	r3, [r4, #8]
 508:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (iphdr_hlen < IP_HLEN) {
 361              		.loc 1 508 29 discriminator 1 view .LVU113
 362 0042 B342     		cmp	r3, r6
 363 0044 1BD3     		bcc	.L37
 508:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (iphdr_hlen < IP_HLEN) {
 364              		.loc 1 508 57 discriminator 2 view .LVU114
 365 0046 132D     		cmp	r5, #19
 366 0048 19D9     		bls	.L37
 549:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_addr_copy_from_ip4(ip_data.current_iphdr_src, iphdr->src);
 367              		.loc 1 549 3 is_stmt 1 view .LVU115
 368 004a D8F81030 		ldr	r3, [r8, #16]	@ unaligned
 369 004e 524A     		ldr	r2, .L64
 370 0050 5361     		str	r3, [r2, #20]
 550:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 371              		.loc 1 550 3 view .LVU116
 372 0052 D8F80C10 		ldr	r1, [r8, #12]	@ unaligned
 373 0056 1161     		str	r1, [r2, #16]
 553:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_IGMP
 374              		.loc 1 553 3 view .LVU117
 553:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_IGMP
 375              		.loc 1 553 7 is_stmt 0 view .LVU118
 376 0058 03F0F003 		and	r3, r3, #240
 553:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_IGMP
 377              		.loc 1 553 6 view .LVU119
 378 005c E02B     		cmp	r3, #224
 379 005e 12D1     		bne	.L39
 568:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = inp;
 380              		.loc 1 568 5 is_stmt 1 view .LVU120
 568:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = inp;
 381              		.loc 1 568 10 is_stmt 0 view .LVU121
 382 0060 97F82D30 		ldrb	r3, [r7, #45]	@ zero_extendqisi2
 568:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = inp;
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 23


 383              		.loc 1 568 8 view .LVU122
 384 0064 13F0010F 		tst	r3, #1
 385 0068 23D0     		beq	.L54
 568:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = inp;
 386              		.loc 1 568 33 discriminator 1 view .LVU123
 387 006a 7B68     		ldr	r3, [r7, #4]
 568:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = inp;
 388              		.loc 1 568 28 discriminator 1 view .LVU124
 389 006c 002B     		cmp	r3, #0
 390 006e 65D1     		bne	.L55
 571:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 391              		.loc 1 571 13 view .LVU125
 392 0070 0025     		movs	r5, #0
 393 0072 1FE0     		b	.L40
 394              	.LVL24:
 395              	.L60:
 504:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 396              		.loc 1 504 5 is_stmt 1 view .LVU126
 397 0074 0146     		mov	r1, r0
 398 0076 2046     		mov	r0, r4
 399              	.LVL25:
 504:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 400              		.loc 1 504 5 is_stmt 0 view .LVU127
 401 0078 FFF7FEFF 		bl	pbuf_realloc
 402              	.LVL26:
 403 007c DDE7     		b	.L36
 404              	.L37:
 509:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 405              		.loc 1 509 5 is_stmt 1 view .LVU128
 511:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 406              		.loc 1 511 109 view .LVU129
 513:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 407              		.loc 1 513 5 view .LVU130
 516:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 408              		.loc 1 516 40 view .LVU131
 518:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS,
 409              		.loc 1 518 5 view .LVU132
 521:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 410              		.loc 1 521 43 view .LVU133
 524:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.lenerr);
 411              		.loc 1 524 5 view .LVU134
 412 007e 2046     		mov	r0, r4
 413 0080 FFF7FEFF 		bl	pbuf_free
 414              	.LVL27:
 525:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.drop);
 415              		.loc 1 525 28 view .LVU135
 526:ThirdPackage/lwip220/core/ipv4/ip4.c ****     MIB2_STATS_INC(mib2.ipindiscards);
 416              		.loc 1 526 26 view .LVU136
 527:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ERR_OK;
 417              		.loc 1 527 38 view .LVU137
 528:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 418              		.loc 1 528 5 view .LVU138
 528:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 419              		.loc 1 528 12 is_stmt 0 view .LVU139
 420 0084 C8E7     		b	.L35
 421              	.L39:
 577:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = inp;
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 24


 422              		.loc 1 577 5 is_stmt 1 view .LVU140
 577:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = inp;
 423              		.loc 1 577 9 is_stmt 0 view .LVU141
 424 0086 3846     		mov	r0, r7
 425 0088 FFF7FEFF 		bl	ip4_input_accept
 426              	.LVL28:
 577:ThirdPackage/lwip220/core/ipv4/ip4.c ****       netif = inp;
 427              		.loc 1 577 8 view .LVU142
 428 008c 0028     		cmp	r0, #0
 429 008e 57D1     		bne	.L56
 580:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if !LWIP_NETIF_LOOPBACK || LWIP_HAVE_LOOPIF
 430              		.loc 1 580 7 is_stmt 1 view .LVU143
 431              	.LVL29:
 585:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* !LWIP_NETIF_LOOPBACK || LWIP_HAVE_LOOPIF */
 432              		.loc 1 585 7 view .LVU144
 585:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* !LWIP_NETIF_LOOPBACK || LWIP_HAVE_LOOPIF */
 433              		.loc 1 585 12 is_stmt 0 view .LVU145
 434 0090 414B     		ldr	r3, .L64
 435 0092 1B7D     		ldrb	r3, [r3, #20]	@ zero_extendqisi2
 585:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* !LWIP_NETIF_LOOPBACK || LWIP_HAVE_LOOPIF */
 436              		.loc 1 585 10 view .LVU146
 437 0094 7F2B     		cmp	r3, #127
 438 0096 55D0     		beq	.L57
 589:ThirdPackage/lwip220/core/ipv4/ip4.c ****           if (netif == inp) {
 439              		.loc 1 589 9 is_stmt 1 view .LVU147
 440 0098 404B     		ldr	r3, .L64+4
 441 009a 1D68     		ldr	r5, [r3]
 442              	.LVL30:
 589:ThirdPackage/lwip220/core/ipv4/ip4.c ****           if (netif == inp) {
 443              		.loc 1 589 9 is_stmt 0 view .LVU148
 444 009c 00E0     		b	.L41
 445              	.L42:
 589:ThirdPackage/lwip220/core/ipv4/ip4.c ****           if (netif == inp) {
 446              		.loc 1 589 9 is_stmt 1 discriminator 2 view .LVU149
 447 009e 2D68     		ldr	r5, [r5]
 448              	.LVL31:
 449              	.L41:
 589:ThirdPackage/lwip220/core/ipv4/ip4.c ****           if (netif == inp) {
 450              		.loc 1 589 9 discriminator 1 view .LVU150
 451 00a0 45B1     		cbz	r5, .L40
 590:ThirdPackage/lwip220/core/ipv4/ip4.c ****             /* we checked that before already */
 452              		.loc 1 590 11 view .LVU151
 590:ThirdPackage/lwip220/core/ipv4/ip4.c ****             /* we checked that before already */
 453              		.loc 1 590 14 is_stmt 0 view .LVU152
 454 00a2 BD42     		cmp	r5, r7
 455 00a4 FBD0     		beq	.L42
 594:ThirdPackage/lwip220/core/ipv4/ip4.c ****             break;
 456              		.loc 1 594 11 is_stmt 1 view .LVU153
 594:ThirdPackage/lwip220/core/ipv4/ip4.c ****             break;
 457              		.loc 1 594 15 is_stmt 0 view .LVU154
 458 00a6 2846     		mov	r0, r5
 459 00a8 FFF7FEFF 		bl	ip4_input_accept
 460              	.LVL32:
 594:ThirdPackage/lwip220/core/ipv4/ip4.c ****             break;
 461              		.loc 1 594 14 view .LVU155
 462 00ac 0028     		cmp	r0, #0
 463 00ae F6D0     		beq	.L42
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 25


 464 00b0 00E0     		b	.L40
 465              	.LVL33:
 466              	.L54:
 571:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 467              		.loc 1 571 13 view .LVU156
 468 00b2 0025     		movs	r5, #0
 469              	.L40:
 470              	.LVL34:
 638:ThirdPackage/lwip220/core/ipv4/ip4.c ****         (ip4_addr_ismulticast(ip4_current_src_addr()))) {
 471              		.loc 1 638 5 is_stmt 1 view .LVU157
 638:ThirdPackage/lwip220/core/ipv4/ip4.c ****         (ip4_addr_ismulticast(ip4_current_src_addr()))) {
 472              		.loc 1 638 10 is_stmt 0 view .LVU158
 473 00b4 3946     		mov	r1, r7
 474 00b6 384B     		ldr	r3, .L64
 475 00b8 1869     		ldr	r0, [r3, #16]
 476 00ba FFF7FEFF 		bl	ip4_addr_isbroadcast_u32
 477              	.LVL35:
 638:ThirdPackage/lwip220/core/ipv4/ip4.c ****         (ip4_addr_ismulticast(ip4_current_src_addr()))) {
 478              		.loc 1 638 8 view .LVU159
 479 00be 0028     		cmp	r0, #0
 480 00c0 42D1     		bne	.L44
 639:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* packet source is not valid */
 481              		.loc 1 639 10 discriminator 1 view .LVU160
 482 00c2 354B     		ldr	r3, .L64
 483 00c4 1B69     		ldr	r3, [r3, #16]
 484 00c6 03F0F003 		and	r3, r3, #240
 638:ThirdPackage/lwip220/core/ipv4/ip4.c ****         (ip4_addr_ismulticast(ip4_current_src_addr()))) {
 485              		.loc 1 638 61 discriminator 1 view .LVU161
 486 00ca E02B     		cmp	r3, #224
 487 00cc 3CD0     		beq	.L44
 652:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* packet not for us, route or discard */
 488              		.loc 1 652 3 is_stmt 1 view .LVU162
 652:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* packet not for us, route or discard */
 489              		.loc 1 652 6 is_stmt 0 view .LVU163
 490 00ce 002D     		cmp	r5, #0
 491 00d0 3ED0     		beq	.L61
 671:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_REASSEMBLY /* packet fragment reassembly code present? */
 492              		.loc 1 671 3 is_stmt 1 view .LVU164
 671:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_REASSEMBLY /* packet fragment reassembly code present? */
 493              		.loc 1 671 8 is_stmt 0 view .LVU165
 494 00d2 B8F80630 		ldrh	r3, [r8, #6]	@ unaligned
 671:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_REASSEMBLY /* packet fragment reassembly code present? */
 495              		.loc 1 671 6 view .LVU166
 496 00d6 23F0C003 		bic	r3, r3, #192
 497 00da 9BB2     		uxth	r3, r3
 498 00dc 3BB1     		cbz	r3, .L47
 674:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* reassemble the packet*/
 499              		.loc 1 674 202 is_stmt 1 view .LVU167
 676:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* packet not fully reassembled yet? */
 500              		.loc 1 676 5 view .LVU168
 676:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* packet not fully reassembled yet? */
 501              		.loc 1 676 9 is_stmt 0 view .LVU169
 502 00de 2046     		mov	r0, r4
 503 00e0 FFF7FEFF 		bl	ip4_reass
 504              	.LVL36:
 678:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return ERR_OK;
 505              		.loc 1 678 5 is_stmt 1 view .LVU170
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 26


 678:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return ERR_OK;
 506              		.loc 1 678 8 is_stmt 0 view .LVU171
 507 00e4 0446     		mov	r4, r0
 508 00e6 0028     		cmp	r0, #0
 509 00e8 96D0     		beq	.L35
 681:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else /* IP_REASSEMBLY == 0, no packet fragment reassembly code present */
 510              		.loc 1 681 5 is_stmt 1 view .LVU172
 681:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else /* IP_REASSEMBLY == 0, no packet fragment reassembly code present */
 511              		.loc 1 681 11 is_stmt 0 view .LVU173
 512 00ea D0F80480 		ldr	r8, [r0, #4]
 513              	.LVL37:
 514              	.L47:
 713:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip4_debug_print(p);
 515              		.loc 1 713 43 is_stmt 1 view .LVU174
 714:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_DEBUGF(IP_DEBUG, ("ip4_input: p->len %"U16_F" p->tot_len %"U16_F"\n", p->len, p->tot_len));
 516              		.loc 1 714 21 view .LVU175
 715:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 517              		.loc 1 715 98 view .LVU176
 717:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_input_netif = inp;
 518              		.loc 1 717 3 view .LVU177
 717:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_input_netif = inp;
 519              		.loc 1 717 25 is_stmt 0 view .LVU178
 520 00ee 2A4A     		ldr	r2, .L64
 521 00f0 1560     		str	r5, [r2]
 718:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip4_header = iphdr;
 522              		.loc 1 718 3 is_stmt 1 view .LVU179
 718:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip4_header = iphdr;
 523              		.loc 1 718 31 is_stmt 0 view .LVU180
 524 00f2 5760     		str	r7, [r2, #4]
 719:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip_header_tot_len = IPH_HL_BYTES(iphdr);
 525              		.loc 1 719 3 is_stmt 1 view .LVU181
 719:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip_header_tot_len = IPH_HL_BYTES(iphdr);
 526              		.loc 1 719 30 is_stmt 0 view .LVU182
 527 00f4 C2F80880 		str	r8, [r2, #8]
 720:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 528              		.loc 1 720 3 is_stmt 1 view .LVU183
 720:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 529              		.loc 1 720 39 is_stmt 0 view .LVU184
 530 00f8 98F80030 		ldrb	r3, [r8]	@ zero_extendqisi2
 531 00fc 03F00F03 		and	r3, r3, #15
 532 0100 9B00     		lsls	r3, r3, #2
 720:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 533              		.loc 1 720 37 view .LVU185
 534 0102 9381     		strh	r3, [r2, #12]	@ movhi
 728:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 535              		.loc 1 728 5 is_stmt 1 view .LVU186
 536 0104 4946     		mov	r1, r9
 537 0106 2046     		mov	r0, r4
 538 0108 FFF7FEFF 		bl	pbuf_remove_header
 539              	.LVL38:
 730:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_UDP
 540              		.loc 1 730 5 view .LVU187
 730:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_UDP
 541              		.loc 1 730 13 is_stmt 0 view .LVU188
 542 010c 98F80930 		ldrb	r3, [r8, #9]	@ zero_extendqisi2
 730:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_UDP
 543              		.loc 1 730 5 view .LVU189
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 27


 544 0110 062B     		cmp	r3, #6
 545 0112 2ED0     		beq	.L48
 730:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_UDP
 546              		.loc 1 730 5 view .LVU190
 547 0114 112B     		cmp	r3, #17
 548 0116 1FD0     		beq	.L49
 549 0118 012B     		cmp	r3, #1
 550 011a 2FD0     		beq	.L62
 766:ThirdPackage/lwip220/core/ipv4/ip4.c ****               !ip4_addr_ismulticast(ip4_current_dest_addr())) {
 551              		.loc 1 766 11 is_stmt 1 view .LVU191
 766:ThirdPackage/lwip220/core/ipv4/ip4.c ****               !ip4_addr_ismulticast(ip4_current_dest_addr())) {
 552              		.loc 1 766 16 is_stmt 0 view .LVU192
 553 011c 2946     		mov	r1, r5
 554 011e 1E4B     		ldr	r3, .L64
 555 0120 5869     		ldr	r0, [r3, #20]
 556 0122 FFF7FEFF 		bl	ip4_addr_isbroadcast_u32
 557              	.LVL39:
 766:ThirdPackage/lwip220/core/ipv4/ip4.c ****               !ip4_addr_ismulticast(ip4_current_dest_addr())) {
 558              		.loc 1 766 14 view .LVU193
 559 0126 28B9     		cbnz	r0, .L53
 767:ThirdPackage/lwip220/core/ipv4/ip4.c ****             pbuf_header_force(p, (s16_t)iphdr_hlen); /* Move to ip header, no check necessary. */
 560              		.loc 1 767 16 discriminator 1 view .LVU194
 561 0128 1B4B     		ldr	r3, .L64
 562 012a 5B69     		ldr	r3, [r3, #20]
 563 012c 03F0F003 		and	r3, r3, #240
 766:ThirdPackage/lwip220/core/ipv4/ip4.c ****               !ip4_addr_ismulticast(ip4_current_dest_addr())) {
 564              		.loc 1 766 69 discriminator 1 view .LVU195
 565 0130 E02B     		cmp	r3, #224
 566 0132 28D1     		bne	.L63
 567              	.L53:
 773:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 568              		.loc 1 773 129 is_stmt 1 view .LVU196
 775:ThirdPackage/lwip220/core/ipv4/ip4.c ****           IP_STATS_INC(ip.drop);
 569              		.loc 1 775 35 view .LVU197
 776:ThirdPackage/lwip220/core/ipv4/ip4.c ****           MIB2_STATS_INC(mib2.ipinunknownprotos);
 570              		.loc 1 776 32 view .LVU198
 777:ThirdPackage/lwip220/core/ipv4/ip4.c ****         }
 571              		.loc 1 777 49 view .LVU199
 779:ThirdPackage/lwip220/core/ipv4/ip4.c ****         break;
 572              		.loc 1 779 9 view .LVU200
 573 0134 2046     		mov	r0, r4
 574 0136 FFF7FEFF 		bl	pbuf_free
 575              	.LVL40:
 780:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 576              		.loc 1 780 9 view .LVU201
 577 013a 11E0     		b	.L52
 578              	.LVL41:
 579              	.L55:
 569:ThirdPackage/lwip220/core/ipv4/ip4.c ****     } else {
 580              		.loc 1 569 13 is_stmt 0 view .LVU202
 581 013c 3D46     		mov	r5, r7
 582 013e B9E7     		b	.L40
 583              	.L56:
 578:ThirdPackage/lwip220/core/ipv4/ip4.c ****     } else {
 584              		.loc 1 578 13 view .LVU203
 585 0140 3D46     		mov	r5, r7
 586 0142 B7E7     		b	.L40
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 28


 587              	.LVL42:
 588              	.L57:
 580:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if !LWIP_NETIF_LOOPBACK || LWIP_HAVE_LOOPIF
 589              		.loc 1 580 13 view .LVU204
 590 0144 0025     		movs	r5, #0
 591 0146 B5E7     		b	.L40
 592              	.LVL43:
 593              	.L44:
 641:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* free (drop) packet pbufs */
 594              		.loc 1 641 116 is_stmt 1 view .LVU205
 643:ThirdPackage/lwip220/core/ipv4/ip4.c ****       IP_STATS_INC(ip.drop);
 595              		.loc 1 643 7 view .LVU206
 596 0148 2046     		mov	r0, r4
 597 014a FFF7FEFF 		bl	pbuf_free
 598              	.LVL44:
 644:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MIB2_STATS_INC(mib2.ipinaddrerrors);
 599              		.loc 1 644 28 view .LVU207
 645:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MIB2_STATS_INC(mib2.ipindiscards);
 600              		.loc 1 645 42 view .LVU208
 646:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return ERR_OK;
 601              		.loc 1 646 40 view .LVU209
 647:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 602              		.loc 1 647 7 view .LVU210
 647:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 603              		.loc 1 647 14 is_stmt 0 view .LVU211
 604 014e 63E7     		b	.L35
 605              	.L61:
 654:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_FORWARD
 606              		.loc 1 654 80 is_stmt 1 view .LVU212
 663:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MIB2_STATS_INC(mib2.ipinaddrerrors);
 607              		.loc 1 663 28 view .LVU213
 664:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MIB2_STATS_INC(mib2.ipindiscards);
 608              		.loc 1 664 42 view .LVU214
 665:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 609              		.loc 1 665 40 view .LVU215
 667:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ERR_OK;
 610              		.loc 1 667 5 view .LVU216
 611 0150 2046     		mov	r0, r4
 612 0152 FFF7FEFF 		bl	pbuf_free
 613              	.LVL45:
 668:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 614              		.loc 1 668 5 view .LVU217
 668:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 615              		.loc 1 668 12 is_stmt 0 view .LVU218
 616 0156 5FE7     		b	.L35
 617              	.L49:
 736:ThirdPackage/lwip220/core/ipv4/ip4.c ****         udp_input(p, inp);
 618              		.loc 1 736 42 is_stmt 1 view .LVU219
 737:ThirdPackage/lwip220/core/ipv4/ip4.c ****         break;
 619              		.loc 1 737 9 view .LVU220
 620 0158 3946     		mov	r1, r7
 621 015a 2046     		mov	r0, r4
 622 015c FFF7FEFF 		bl	udp_input
 623              	.LVL46:
 738:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_UDP */
 624              		.loc 1 738 9 view .LVU221
 625              	.L52:
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 29


 785:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_input_netif = NULL;
 626              		.loc 1 785 3 view .LVU222
 785:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_input_netif = NULL;
 627              		.loc 1 785 25 is_stmt 0 view .LVU223
 628 0160 0D4B     		ldr	r3, .L64
 629 0162 0022     		movs	r2, #0
 630 0164 1A60     		str	r2, [r3]
 786:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip4_header = NULL;
 631              		.loc 1 786 3 is_stmt 1 view .LVU224
 786:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip4_header = NULL;
 632              		.loc 1 786 31 is_stmt 0 view .LVU225
 633 0166 5A60     		str	r2, [r3, #4]
 787:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip_header_tot_len = 0;
 634              		.loc 1 787 3 is_stmt 1 view .LVU226
 787:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip_data.current_ip_header_tot_len = 0;
 635              		.loc 1 787 30 is_stmt 0 view .LVU227
 636 0168 9A60     		str	r2, [r3, #8]
 788:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip4_addr_set_any(ip4_current_src_addr());
 637              		.loc 1 788 3 is_stmt 1 view .LVU228
 788:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip4_addr_set_any(ip4_current_src_addr());
 638              		.loc 1 788 37 is_stmt 0 view .LVU229
 639 016a 9A81     		strh	r2, [r3, #12]	@ movhi
 789:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip4_addr_set_any(ip4_current_dest_addr());
 640              		.loc 1 789 3 is_stmt 1 view .LVU230
 641 016c 1A61     		str	r2, [r3, #16]
 790:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 642              		.loc 1 790 3 view .LVU231
 643 016e 5A61     		str	r2, [r3, #20]
 792:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 644              		.loc 1 792 3 view .LVU232
 792:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 645              		.loc 1 792 10 is_stmt 0 view .LVU233
 646 0170 52E7     		b	.L35
 647              	.L48:
 742:ThirdPackage/lwip220/core/ipv4/ip4.c ****         tcp_input(p, inp);
 648              		.loc 1 742 42 is_stmt 1 view .LVU234
 743:ThirdPackage/lwip220/core/ipv4/ip4.c ****         break;
 649              		.loc 1 743 9 view .LVU235
 650 0172 3946     		mov	r1, r7
 651 0174 2046     		mov	r0, r4
 652 0176 FFF7FEFF 		bl	tcp_input
 653              	.LVL47:
 744:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_TCP */
 654              		.loc 1 744 9 view .LVU236
 655 017a F1E7     		b	.L52
 656              	.L62:
 748:ThirdPackage/lwip220/core/ipv4/ip4.c ****         icmp_input(p, inp);
 657              		.loc 1 748 42 view .LVU237
 749:ThirdPackage/lwip220/core/ipv4/ip4.c ****         break;
 658              		.loc 1 749 9 view .LVU238
 659 017c 3946     		mov	r1, r7
 660 017e 2046     		mov	r0, r4
 661 0180 FFF7FEFF 		bl	icmp_input
 662              	.LVL48:
 750:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_ICMP */
 663              		.loc 1 750 9 view .LVU239
 664 0184 ECE7     		b	.L52
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 30


 665              	.L63:
 768:ThirdPackage/lwip220/core/ipv4/ip4.c ****             icmp_dest_unreach(p, ICMP_DUR_PROTO);
 666              		.loc 1 768 13 view .LVU240
 667 0186 4946     		mov	r1, r9
 668 0188 2046     		mov	r0, r4
 669 018a FFF7FEFF 		bl	pbuf_header_force
 670              	.LVL49:
 769:ThirdPackage/lwip220/core/ipv4/ip4.c ****           }
 671              		.loc 1 769 13 view .LVU241
 672 018e 0221     		movs	r1, #2
 673 0190 2046     		mov	r0, r4
 674 0192 FFF7FEFF 		bl	icmp_dest_unreach
 675              	.LVL50:
 676 0196 CDE7     		b	.L53
 677              	.L65:
 678              		.align	2
 679              	.L64:
 680 0198 00000000 		.word	ip_data
 681 019c 00000000 		.word	netif_list
 682              		.cfi_endproc
 683              	.LFE162:
 685              		.section	.rodata.ip4_output_if_src.str1.4,"aMS",%progbits,1
 686              		.align	2
 687              	.LC0:
 688 0000 54686972 		.ascii	"ThirdPackage/lwip220/core/ipv4/ip4.c\000"
 688      64506163 
 688      6B616765 
 688      2F6C7769 
 688      70323230 
 689 0025 000000   		.align	2
 690              	.LC1:
 691 0028 702D3E72 		.ascii	"p->ref == 1\000"
 691      6566203D 
 691      3D203100 
 692              		.align	2
 693              	.LC2:
 694 0034 41737365 		.ascii	"Assertion \"%s\" failed at line %d in %s\012\000"
 694      7274696F 
 694      6E202225 
 694      73222066 
 694      61696C65 
 695              		.align	2
 696              	.LC3:
 697 005c 63686563 		.ascii	"check that first pbuf can hold struct ip_hdr\000"
 697      6B207468 
 697      61742066 
 697      69727374 
 697      20706275 
 698              		.section	.text.ip4_output_if_src,"ax",%progbits
 699              		.align	1
 700              		.global	ip4_output_if_src
 701              		.syntax unified
 702              		.thumb
 703              		.thumb_func
 705              	ip4_output_if_src:
 706              	.LVL51:
 707              	.LFB164:
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 31


 794:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 795:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
 796:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Sends an IP packet on a network interface. This function constructs
 797:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * the IP header and calculates the IP header checksum. If the source
 798:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * IP address is NULL, the IP address of the outgoing network
 799:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * interface is filled in as source address.
 800:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * If the destination IP address is LWIP_IP_HDRINCL, p is assumed to already
 801:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * include an IP header and p->payload points to it instead of the data.
 802:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
 803:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param p the packet to send (p->payload points to the data, e.g. next
 804:ThirdPackage/lwip220/core/ipv4/ip4.c ****             protocol header; if dest == LWIP_IP_HDRINCL, p already includes an
 805:ThirdPackage/lwip220/core/ipv4/ip4.c ****             IP header and p->payload points to that IP header)
 806:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param src the source IP address to send from (if src == IP4_ADDR_ANY, the
 807:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *         IP  address of the netif used to send is used as source address)
 808:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param dest the destination IP address to send the packet to
 809:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param ttl the TTL value to be set in the IP header
 810:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param tos the TOS value to be set in the IP header
 811:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param proto the PROTOCOL to be set in the IP header
 812:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param netif the netif on which to send this packet
 813:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @return ERR_OK if the packet was sent OK
 814:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *         ERR_BUF if p doesn't have enough space for IP/LINK headers
 815:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *         returns errors returned by netif->output
 816:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
 817:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @note ip_id: RFC791 "some host may be able to simply use
 818:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *  unique identifiers independent of destination"
 819:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
 820:ThirdPackage/lwip220/core/ipv4/ip4.c **** err_t
 821:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_output_if(struct pbuf *p, const ip4_addr_t *src, const ip4_addr_t *dest,
 822:ThirdPackage/lwip220/core/ipv4/ip4.c ****               u8_t ttl, u8_t tos,
 823:ThirdPackage/lwip220/core/ipv4/ip4.c ****               u8_t proto, struct netif *netif)
 824:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
 825:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_OPTIONS_SEND
 826:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return ip4_output_if_opt(p, src, dest, ttl, tos, proto, netif, NULL, 0);
 827:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 828:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 829:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
 830:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Same as ip_output_if() but with the possibility to include IP options:
 831:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
 832:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @ param ip_options pointer to the IP options, copied into the IP header
 833:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @ param optlen length of ip_options
 834:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
 835:ThirdPackage/lwip220/core/ipv4/ip4.c **** err_t
 836:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_output_if_opt(struct pbuf *p, const ip4_addr_t *src, const ip4_addr_t *dest,
 837:ThirdPackage/lwip220/core/ipv4/ip4.c ****                   u8_t ttl, u8_t tos, u8_t proto, struct netif *netif, void *ip_options,
 838:ThirdPackage/lwip220/core/ipv4/ip4.c ****                   u16_t optlen)
 839:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
 840:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_OPTIONS_SEND */
 841:ThirdPackage/lwip220/core/ipv4/ip4.c ****   const ip4_addr_t *src_used = src;
 842:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (dest != LWIP_IP_HDRINCL) {
 843:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (ip4_addr_isany(src)) {
 844:ThirdPackage/lwip220/core/ipv4/ip4.c ****       src_used = netif_ip4_addr(netif);
 845:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 846:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 847:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 848:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_OPTIONS_SEND
 849:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return ip4_output_if_opt_src(p, src_used, dest, ttl, tos, proto, netif,
 850:ThirdPackage/lwip220/core/ipv4/ip4.c ****                                ip_options, optlen);
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 32


 851:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else /* IP_OPTIONS_SEND */
 852:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return ip4_output_if_src(p, src_used, dest, ttl, tos, proto, netif);
 853:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_OPTIONS_SEND */
 854:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 855:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 856:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
 857:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Same as ip_output_if() but 'src' address is not replaced by netif address
 858:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * when it is 'any'.
 859:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
 860:ThirdPackage/lwip220/core/ipv4/ip4.c **** err_t
 861:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_output_if_src(struct pbuf *p, const ip4_addr_t *src, const ip4_addr_t *dest,
 862:ThirdPackage/lwip220/core/ipv4/ip4.c ****                   u8_t ttl, u8_t tos,
 863:ThirdPackage/lwip220/core/ipv4/ip4.c ****                   u8_t proto, struct netif *netif)
 864:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
 708              		.loc 1 864 1 view -0
 709              		.cfi_startproc
 710              		@ args = 12, pretend = 0, frame = 8
 711              		@ frame_needed = 0, uses_anonymous_args = 0
 712              		.loc 1 864 1 is_stmt 0 view .LVU243
 713 0000 2DE9F043 		push	{r4, r5, r6, r7, r8, r9, lr}
 714              	.LCFI6:
 715              		.cfi_def_cfa_offset 28
 716              		.cfi_offset 4, -28
 717              		.cfi_offset 5, -24
 718              		.cfi_offset 6, -20
 719              		.cfi_offset 7, -16
 720              		.cfi_offset 8, -12
 721              		.cfi_offset 9, -8
 722              		.cfi_offset 14, -4
 723 0004 83B0     		sub	sp, sp, #12
 724              	.LCFI7:
 725              		.cfi_def_cfa_offset 40
 726 0006 0446     		mov	r4, r0
 727 0008 0F46     		mov	r7, r1
 728 000a 1646     		mov	r6, r2
 729 000c 9946     		mov	r9, r3
 730 000e DDF83080 		ldr	r8, [sp, #48]
 865:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_OPTIONS_SEND
 866:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return ip4_output_if_opt_src(p, src, dest, ttl, tos, proto, netif, NULL, 0);
 867:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 868:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 869:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
 870:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Same as ip_output_if_opt() but 'src' address is not replaced by netif address
 871:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * when it is 'any'.
 872:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
 873:ThirdPackage/lwip220/core/ipv4/ip4.c **** err_t
 874:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_output_if_opt_src(struct pbuf *p, const ip4_addr_t *src, const ip4_addr_t *dest,
 875:ThirdPackage/lwip220/core/ipv4/ip4.c ****                       u8_t ttl, u8_t tos, u8_t proto, struct netif *netif, void *ip_options,
 876:ThirdPackage/lwip220/core/ipv4/ip4.c ****                       u16_t optlen)
 877:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
 878:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_OPTIONS_SEND */
 879:ThirdPackage/lwip220/core/ipv4/ip4.c ****   struct ip_hdr *iphdr;
 731              		.loc 1 879 3 is_stmt 1 view .LVU244
 880:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip4_addr_t dest_addr;
 732              		.loc 1 880 3 view .LVU245
 881:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if CHECKSUM_GEN_IP_INLINE
 882:ThirdPackage/lwip220/core/ipv4/ip4.c ****   u32_t chk_sum = 0;
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 33


 883:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* CHECKSUM_GEN_IP_INLINE */
 884:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 885:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_ASSERT_CORE_LOCKED();
 733              		.loc 1 885 28 view .LVU246
 886:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_IP_CHECK_PBUF_REF_COUNT_FOR_TX(p);
 734              		.loc 1 886 3 view .LVU247
 735              		.loc 1 886 3 view .LVU248
 736 0012 827B     		ldrb	r2, [r0, #14]	@ zero_extendqisi2
 737              	.LVL52:
 738              		.loc 1 886 3 is_stmt 0 view .LVU249
 739 0014 012A     		cmp	r2, #1
 740 0016 3FD1     		bne	.L78
 741              	.LVL53:
 742              	.L67:
 743              		.loc 1 886 3 is_stmt 1 discriminator 3 view .LVU250
 744              		.loc 1 886 3 discriminator 3 view .LVU251
 887:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 888:ThirdPackage/lwip220/core/ipv4/ip4.c ****   MIB2_STATS_INC(mib2.ipoutrequests);
 745              		.loc 1 888 37 discriminator 3 view .LVU252
 889:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 890:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* Should the IP header be generated or is it already included in p? */
 891:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (dest != LWIP_IP_HDRINCL) {
 746              		.loc 1 891 3 discriminator 3 view .LVU253
 747              		.loc 1 891 6 is_stmt 0 discriminator 3 view .LVU254
 748 0018 002E     		cmp	r6, #0
 749 001a 51D0     		beq	.L68
 750              	.LBB2:
 892:ThirdPackage/lwip220/core/ipv4/ip4.c ****     u16_t ip_hlen = IP_HLEN;
 751              		.loc 1 892 5 is_stmt 1 view .LVU255
 752              	.LVL54:
 893:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_OPTIONS_SEND
 894:ThirdPackage/lwip220/core/ipv4/ip4.c ****     u16_t optlen_aligned = 0;
 895:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (optlen != 0) {
 896:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if CHECKSUM_GEN_IP_INLINE
 897:ThirdPackage/lwip220/core/ipv4/ip4.c ****       int i;
 898:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* CHECKSUM_GEN_IP_INLINE */
 899:ThirdPackage/lwip220/core/ipv4/ip4.c ****       if (optlen > (IP_HLEN_MAX - IP_HLEN)) {
 900:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* optlen too long */
 901:ThirdPackage/lwip220/core/ipv4/ip4.c ****         LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("ip4_output_if_opt: optlen too long\n"));
 902:ThirdPackage/lwip220/core/ipv4/ip4.c ****         IP_STATS_INC(ip.err);
 903:ThirdPackage/lwip220/core/ipv4/ip4.c ****         MIB2_STATS_INC(mib2.ipoutdiscards);
 904:ThirdPackage/lwip220/core/ipv4/ip4.c ****         return ERR_VAL;
 905:ThirdPackage/lwip220/core/ipv4/ip4.c ****       }
 906:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* round up to a multiple of 4 */
 907:ThirdPackage/lwip220/core/ipv4/ip4.c ****       optlen_aligned = (u16_t)((optlen + 3) & ~3);
 908:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip_hlen = (u16_t)(ip_hlen + optlen_aligned);
 909:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* First write in the IP options */
 910:ThirdPackage/lwip220/core/ipv4/ip4.c ****       if (pbuf_add_header(p, optlen_aligned)) {
 911:ThirdPackage/lwip220/core/ipv4/ip4.c ****         LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("ip4_output_if_opt: not enough room for IP 
 912:ThirdPackage/lwip220/core/ipv4/ip4.c ****         IP_STATS_INC(ip.err);
 913:ThirdPackage/lwip220/core/ipv4/ip4.c ****         MIB2_STATS_INC(mib2.ipoutdiscards);
 914:ThirdPackage/lwip220/core/ipv4/ip4.c ****         return ERR_BUF;
 915:ThirdPackage/lwip220/core/ipv4/ip4.c ****       }
 916:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MEMCPY(p->payload, ip_options, optlen);
 917:ThirdPackage/lwip220/core/ipv4/ip4.c ****       if (optlen < optlen_aligned) {
 918:ThirdPackage/lwip220/core/ipv4/ip4.c ****         /* zero the remaining bytes */
 919:ThirdPackage/lwip220/core/ipv4/ip4.c ****         memset(((char *)p->payload) + optlen, 0, (size_t)(optlen_aligned - optlen));
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 34


 920:ThirdPackage/lwip220/core/ipv4/ip4.c ****       }
 921:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if CHECKSUM_GEN_IP_INLINE
 922:ThirdPackage/lwip220/core/ipv4/ip4.c ****       for (i = 0; i < optlen_aligned / 2; i++) {
 923:ThirdPackage/lwip220/core/ipv4/ip4.c ****         chk_sum += ((u16_t *)p->payload)[i];
 924:ThirdPackage/lwip220/core/ipv4/ip4.c ****       }
 925:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* CHECKSUM_GEN_IP_INLINE */
 926:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 927:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_OPTIONS_SEND */
 928:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* generate IP header */
 929:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (pbuf_add_header(p, IP_HLEN)) {
 753              		.loc 1 929 5 view .LVU256
 754              		.loc 1 929 9 is_stmt 0 view .LVU257
 755 001c 1421     		movs	r1, #20
 756 001e 2046     		mov	r0, r4
 757 0020 FFF7FEFF 		bl	pbuf_add_header
 758              	.LVL55:
 759              		.loc 1 929 8 view .LVU258
 760 0024 0028     		cmp	r0, #0
 761 0026 59D1     		bne	.L75
 930:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("ip4_output: not enough room for IP header in
 931:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 932:ThirdPackage/lwip220/core/ipv4/ip4.c ****       IP_STATS_INC(ip.err);
 933:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MIB2_STATS_INC(mib2.ipoutdiscards);
 934:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return ERR_BUF;
 935:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 936:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 937:ThirdPackage/lwip220/core/ipv4/ip4.c ****     iphdr = (struct ip_hdr *)p->payload;
 762              		.loc 1 937 5 is_stmt 1 view .LVU259
 763              		.loc 1 937 11 is_stmt 0 view .LVU260
 764 0028 6568     		ldr	r5, [r4, #4]
 765              	.LVL56:
 938:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_ASSERT("check that first pbuf can hold struct ip_hdr",
 766              		.loc 1 938 5 is_stmt 1 view .LVU261
 767              		.loc 1 938 5 view .LVU262
 768 002a 6389     		ldrh	r3, [r4, #10]
 769 002c 132B     		cmp	r3, #19
 770 002e 3BD9     		bls	.L79
 771              	.L70:
 772              		.loc 1 938 5 discriminator 3 view .LVU263
 773              		.loc 1 938 5 discriminator 3 view .LVU264
 939:ThirdPackage/lwip220/core/ipv4/ip4.c ****                 (p->len >= sizeof(struct ip_hdr)));
 940:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 941:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IPH_TTL_SET(iphdr, ttl);
 774              		.loc 1 941 5 discriminator 3 view .LVU265
 775 0030 85F80890 		strb	r9, [r5, #8]
 942:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IPH_PROTO_SET(iphdr, proto);
 776              		.loc 1 942 5 discriminator 3 view .LVU266
 777 0034 9DF82C30 		ldrb	r3, [sp, #44]	@ zero_extendqisi2
 778 0038 6B72     		strb	r3, [r5, #9]
 943:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if CHECKSUM_GEN_IP_INLINE
 944:ThirdPackage/lwip220/core/ipv4/ip4.c ****     chk_sum += PP_NTOHS(proto | (ttl << 8));
 945:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* CHECKSUM_GEN_IP_INLINE */
 946:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 947:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* dest cannot be NULL here */
 948:ThirdPackage/lwip220/core/ipv4/ip4.c ****     ip4_addr_copy(iphdr->dest, *dest);
 779              		.loc 1 948 5 discriminator 3 view .LVU267
 780 003a 3368     		ldr	r3, [r6]
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 35


 781 003c 2B61     		str	r3, [r5, #16]	@ unaligned
 949:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if CHECKSUM_GEN_IP_INLINE
 950:ThirdPackage/lwip220/core/ipv4/ip4.c ****     chk_sum += ip4_addr_get_u32(&iphdr->dest) & 0xFFFF;
 951:ThirdPackage/lwip220/core/ipv4/ip4.c ****     chk_sum += ip4_addr_get_u32(&iphdr->dest) >> 16;
 952:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* CHECKSUM_GEN_IP_INLINE */
 953:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 954:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IPH_VHL_SET(iphdr, 4, ip_hlen / 4);
 782              		.loc 1 954 5 discriminator 3 view .LVU268
 783 003e 4523     		movs	r3, #69
 784 0040 2B70     		strb	r3, [r5]
 955:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IPH_TOS_SET(iphdr, tos);
 785              		.loc 1 955 5 discriminator 3 view .LVU269
 786 0042 9DF82830 		ldrb	r3, [sp, #40]	@ zero_extendqisi2
 787 0046 6B70     		strb	r3, [r5, #1]
 956:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if CHECKSUM_GEN_IP_INLINE
 957:ThirdPackage/lwip220/core/ipv4/ip4.c ****     chk_sum += PP_NTOHS(tos | (iphdr->_v_hl << 8));
 958:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* CHECKSUM_GEN_IP_INLINE */
 959:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IPH_LEN_SET(iphdr, lwip_htons(p->tot_len));
 788              		.loc 1 959 5 discriminator 3 view .LVU270
 789 0048 2089     		ldrh	r0, [r4, #8]
 790 004a FFF7FEFF 		bl	lwip_htons
 791              	.LVL57:
 792 004e 6880     		strh	r0, [r5, #2]	@ unaligned
 960:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if CHECKSUM_GEN_IP_INLINE
 961:ThirdPackage/lwip220/core/ipv4/ip4.c ****     chk_sum += iphdr->_len;
 962:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* CHECKSUM_GEN_IP_INLINE */
 963:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IPH_OFFSET_SET(iphdr, 0);
 793              		.loc 1 963 5 discriminator 3 view .LVU271
 794 0050 0023     		movs	r3, #0
 795 0052 AB71     		strb	r3, [r5, #6]
 796 0054 EB71     		strb	r3, [r5, #7]
 964:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IPH_ID_SET(iphdr, lwip_htons(ip_id));
 797              		.loc 1 964 5 discriminator 3 view .LVU272
 798 0056 DFF8A490 		ldr	r9, .L82+20
 799 005a B9F80000 		ldrh	r0, [r9]
 800 005e FFF7FEFF 		bl	lwip_htons
 801              	.LVL58:
 802 0062 A880     		strh	r0, [r5, #4]	@ unaligned
 965:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if CHECKSUM_GEN_IP_INLINE
 966:ThirdPackage/lwip220/core/ipv4/ip4.c ****     chk_sum += iphdr->_id;
 967:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* CHECKSUM_GEN_IP_INLINE */
 968:ThirdPackage/lwip220/core/ipv4/ip4.c ****     ++ip_id;
 803              		.loc 1 968 5 discriminator 3 view .LVU273
 804 0064 B9F80030 		ldrh	r3, [r9]
 805 0068 0133     		adds	r3, r3, #1
 806 006a A9F80030 		strh	r3, [r9]	@ movhi
 969:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 970:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (src == NULL) {
 807              		.loc 1 970 5 discriminator 3 view .LVU274
 808              		.loc 1 970 8 is_stmt 0 discriminator 3 view .LVU275
 809 006e 1FB3     		cbz	r7, .L80
 971:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_copy(iphdr->src, *IP4_ADDR_ANY4);
 972:ThirdPackage/lwip220/core/ipv4/ip4.c ****     } else {
 973:ThirdPackage/lwip220/core/ipv4/ip4.c ****       /* src cannot be NULL here */
 974:ThirdPackage/lwip220/core/ipv4/ip4.c ****       ip4_addr_copy(iphdr->src, *src);
 810              		.loc 1 974 7 is_stmt 1 view .LVU276
 811 0070 3B68     		ldr	r3, [r7]
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 36


 812 0072 EB60     		str	r3, [r5, #12]	@ unaligned
 813              	.L72:
 975:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 976:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 977:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if CHECKSUM_GEN_IP_INLINE
 978:ThirdPackage/lwip220/core/ipv4/ip4.c ****     chk_sum += ip4_addr_get_u32(&iphdr->src) & 0xFFFF;
 979:ThirdPackage/lwip220/core/ipv4/ip4.c ****     chk_sum += ip4_addr_get_u32(&iphdr->src) >> 16;
 980:ThirdPackage/lwip220/core/ipv4/ip4.c ****     chk_sum = (chk_sum >> 16) + (chk_sum & 0xFFFF);
 981:ThirdPackage/lwip220/core/ipv4/ip4.c ****     chk_sum = (chk_sum >> 16) + chk_sum;
 982:ThirdPackage/lwip220/core/ipv4/ip4.c ****     chk_sum = ~chk_sum;
 983:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_IP) {
 984:ThirdPackage/lwip220/core/ipv4/ip4.c ****       iphdr->_chksum = (u16_t)chk_sum; /* network order */
 985:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 986:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_CHECKSUM_CTRL_PER_NETIF
 987:ThirdPackage/lwip220/core/ipv4/ip4.c ****     else {
 988:ThirdPackage/lwip220/core/ipv4/ip4.c ****       IPH_CHKSUM_SET(iphdr, 0);
 989:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 990:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_CHECKSUM_CTRL_PER_NETIF*/
 991:ThirdPackage/lwip220/core/ipv4/ip4.c **** #else /* CHECKSUM_GEN_IP_INLINE */
 992:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IPH_CHKSUM_SET(iphdr, 0);
 814              		.loc 1 992 5 view .LVU277
 815 0074 0023     		movs	r3, #0
 816 0076 AB72     		strb	r3, [r5, #10]
 817 0078 EB72     		strb	r3, [r5, #11]
 818              	.LVL59:
 819              	.L73:
 820              		.loc 1 992 5 is_stmt 0 view .LVU278
 821              	.LBE2:
 993:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if CHECKSUM_GEN_IP
 994:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IF__NETIF_CHECKSUM_ENABLED(netif, NETIF_CHECKSUM_GEN_IP) {
 995:ThirdPackage/lwip220/core/ipv4/ip4.c ****       IPH_CHKSUM_SET(iphdr, inet_chksum(iphdr, ip_hlen));
 996:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 997:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* CHECKSUM_GEN_IP */
 998:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* CHECKSUM_GEN_IP_INLINE */
 999:ThirdPackage/lwip220/core/ipv4/ip4.c ****   } else {
1000:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* IP header already included in p */
1001:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (p->len < IP_HLEN) {
1002:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("ip4_output: LWIP_IP_HDRINCL but pbuf is too 
1003:ThirdPackage/lwip220/core/ipv4/ip4.c ****       IP_STATS_INC(ip.err);
1004:ThirdPackage/lwip220/core/ipv4/ip4.c ****       MIB2_STATS_INC(mib2.ipoutdiscards);
1005:ThirdPackage/lwip220/core/ipv4/ip4.c ****       return ERR_BUF;
1006:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
1007:ThirdPackage/lwip220/core/ipv4/ip4.c ****     iphdr = (struct ip_hdr *)p->payload;
1008:ThirdPackage/lwip220/core/ipv4/ip4.c ****     ip4_addr_copy(dest_addr, iphdr->dest);
1009:ThirdPackage/lwip220/core/ipv4/ip4.c ****     dest = &dest_addr;
1010:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
1011:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
1012:ThirdPackage/lwip220/core/ipv4/ip4.c ****   IP_STATS_INC(ip.xmit);
 822              		.loc 1 1012 24 is_stmt 1 view .LVU279
1013:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
1014:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_DEBUGF(IP_DEBUG, ("ip4_output_if: %c%c%"U16_F"\n", netif->name[0], netif->name[1], (u16_t)ne
 823              		.loc 1 1014 110 view .LVU280
1015:ThirdPackage/lwip220/core/ipv4/ip4.c ****   ip4_debug_print(p);
 824              		.loc 1 1015 21 view .LVU281
1016:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
1017:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if ENABLE_LOOPBACK
1018:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (ip4_addr_eq(dest, netif_ip4_addr(netif))
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 37


1019:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if !LWIP_HAVE_LOOPIF
1020:ThirdPackage/lwip220/core/ipv4/ip4.c ****       || ip4_addr_isloopback(dest)
1021:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* !LWIP_HAVE_LOOPIF */
1022:ThirdPackage/lwip220/core/ipv4/ip4.c ****      ) {
1023:ThirdPackage/lwip220/core/ipv4/ip4.c ****     /* Packet to self, enqueue it for loopback */
1024:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_DEBUGF(IP_DEBUG, ("netif_loop_output()\n"));
1025:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return netif_loop_output(netif, p);
1026:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
1027:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if LWIP_MULTICAST_TX_OPTIONS
1028:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if ((p->flags & PBUF_FLAG_MCASTLOOP) != 0) {
1029:ThirdPackage/lwip220/core/ipv4/ip4.c ****     netif_loop_output(netif, p);
1030:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
1031:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* LWIP_MULTICAST_TX_OPTIONS */
1032:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* ENABLE_LOOPBACK */
1033:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_FRAG
1034:ThirdPackage/lwip220/core/ipv4/ip4.c ****   /* don't fragment if interface has mtu set to 0 [loopif] */
1035:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (netif->mtu && (p->tot_len > netif->mtu)) {
 825              		.loc 1 1035 3 view .LVU282
 826              		.loc 1 1035 12 is_stmt 0 view .LVU283
 827 007a B8F82430 		ldrh	r3, [r8, #36]
 828              		.loc 1 1035 6 view .LVU284
 829 007e 13B1     		cbz	r3, .L74
 830              		.loc 1 1035 23 discriminator 1 view .LVU285
 831 0080 2289     		ldrh	r2, [r4, #8]
 832              		.loc 1 1035 18 discriminator 1 view .LVU286
 833 0082 9342     		cmp	r3, r2
 834 0084 24D3     		bcc	.L81
 835              	.L74:
1036:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ip4_frag(p, netif, dest);
1037:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
1038:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_FRAG */
1039:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
1040:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_DEBUGF(IP_DEBUG, ("ip4_output_if: call netif->output()\n"));
 836              		.loc 1 1040 67 is_stmt 1 view .LVU287
1041:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return netif->output(netif, p, dest);
 837              		.loc 1 1041 3 view .LVU288
 838              		.loc 1 1041 15 is_stmt 0 view .LVU289
 839 0086 D8F81430 		ldr	r3, [r8, #20]
 840              		.loc 1 1041 10 view .LVU290
 841 008a 3246     		mov	r2, r6
 842 008c 2146     		mov	r1, r4
 843 008e 4046     		mov	r0, r8
 844 0090 9847     		blx	r3
 845              	.LVL60:
 846              	.L69:
1042:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 847              		.loc 1 1042 1 view .LVU291
 848 0092 03B0     		add	sp, sp, #12
 849              	.LCFI8:
 850              		.cfi_remember_state
 851              		.cfi_def_cfa_offset 28
 852              		@ sp needed
 853 0094 BDE8F083 		pop	{r4, r5, r6, r7, r8, r9, pc}
 854              	.LVL61:
 855              	.L78:
 856              	.LCFI9:
 857              		.cfi_restore_state
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 38


 886:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 858              		.loc 1 886 3 is_stmt 1 discriminator 1 view .LVU292
 886:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 859              		.loc 1 886 3 discriminator 1 view .LVU293
 860 0098 134B     		ldr	r3, .L82
 861              	.LVL62:
 886:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 862              		.loc 1 886 3 is_stmt 0 discriminator 1 view .LVU294
 863 009a 40F27632 		movw	r2, #886
 864 009e 1349     		ldr	r1, .L82+4
 865              	.LVL63:
 886:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 866              		.loc 1 886 3 discriminator 1 view .LVU295
 867 00a0 1348     		ldr	r0, .L82+8
 868              	.LVL64:
 886:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 869              		.loc 1 886 3 discriminator 1 view .LVU296
 870 00a2 FFF7FEFF 		bl	printf
 871              	.LVL65:
 872 00a6 B7E7     		b	.L67
 873              	.LVL66:
 874              	.L79:
 875              	.LBB3:
 938:ThirdPackage/lwip220/core/ipv4/ip4.c ****                 (p->len >= sizeof(struct ip_hdr)));
 876              		.loc 1 938 5 is_stmt 1 discriminator 1 view .LVU297
 938:ThirdPackage/lwip220/core/ipv4/ip4.c ****                 (p->len >= sizeof(struct ip_hdr)));
 877              		.loc 1 938 5 discriminator 1 view .LVU298
 878 00a8 0F4B     		ldr	r3, .L82
 879 00aa 40F2AA32 		movw	r2, #938
 880 00ae 1149     		ldr	r1, .L82+12
 881 00b0 0F48     		ldr	r0, .L82+8
 882 00b2 FFF7FEFF 		bl	printf
 883              	.LVL67:
 884 00b6 BBE7     		b	.L70
 885              	.L80:
 971:ThirdPackage/lwip220/core/ipv4/ip4.c ****     } else {
 886              		.loc 1 971 7 view .LVU299
 887 00b8 0F4B     		ldr	r3, .L82+16
 888 00ba 1B68     		ldr	r3, [r3]
 889 00bc EB60     		str	r3, [r5, #12]	@ unaligned
 890 00be D9E7     		b	.L72
 891              	.LVL68:
 892              	.L68:
 971:ThirdPackage/lwip220/core/ipv4/ip4.c ****     } else {
 893              		.loc 1 971 7 is_stmt 0 view .LVU300
 894              	.LBE3:
1001:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("ip4_output: LWIP_IP_HDRINCL but pbuf is too 
 895              		.loc 1 1001 5 is_stmt 1 view .LVU301
1001:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("ip4_output: LWIP_IP_HDRINCL but pbuf is too 
 896              		.loc 1 1001 10 is_stmt 0 view .LVU302
 897 00c0 6389     		ldrh	r3, [r4, #10]
1001:ThirdPackage/lwip220/core/ipv4/ip4.c ****       LWIP_DEBUGF(IP_DEBUG | LWIP_DBG_LEVEL_SERIOUS, ("ip4_output: LWIP_IP_HDRINCL but pbuf is too 
 898              		.loc 1 1001 8 view .LVU303
 899 00c2 132B     		cmp	r3, #19
 900 00c4 0DD9     		bls	.L76
1007:ThirdPackage/lwip220/core/ipv4/ip4.c ****     ip4_addr_copy(dest_addr, iphdr->dest);
 901              		.loc 1 1007 5 is_stmt 1 view .LVU304
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 39


1007:ThirdPackage/lwip220/core/ipv4/ip4.c ****     ip4_addr_copy(dest_addr, iphdr->dest);
 902              		.loc 1 1007 11 is_stmt 0 view .LVU305
 903 00c6 6368     		ldr	r3, [r4, #4]
 904              	.LVL69:
1008:ThirdPackage/lwip220/core/ipv4/ip4.c ****     dest = &dest_addr;
 905              		.loc 1 1008 5 is_stmt 1 view .LVU306
 906 00c8 1B69     		ldr	r3, [r3, #16]	@ unaligned
 907              	.LVL70:
1008:ThirdPackage/lwip220/core/ipv4/ip4.c ****     dest = &dest_addr;
 908              		.loc 1 1008 5 is_stmt 0 view .LVU307
 909 00ca 0193     		str	r3, [sp, #4]
1009:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 910              		.loc 1 1009 5 is_stmt 1 view .LVU308
 911              	.LVL71:
1009:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 912              		.loc 1 1009 10 is_stmt 0 view .LVU309
 913 00cc 01AE     		add	r6, sp, #4
 914              	.LVL72:
1009:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 915              		.loc 1 1009 10 view .LVU310
 916 00ce D4E7     		b	.L73
 917              	.LVL73:
 918              	.L81:
1036:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 919              		.loc 1 1036 5 is_stmt 1 view .LVU311
1036:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 920              		.loc 1 1036 12 is_stmt 0 view .LVU312
 921 00d0 3246     		mov	r2, r6
 922 00d2 4146     		mov	r1, r8
 923 00d4 2046     		mov	r0, r4
 924 00d6 FFF7FEFF 		bl	ip4_frag
 925              	.LVL74:
 926 00da DAE7     		b	.L69
 927              	.LVL75:
 928              	.L75:
 929              	.LBB4:
 934:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 930              		.loc 1 934 14 view .LVU313
 931 00dc 6FF00100 		mvn	r0, #1
 932 00e0 D7E7     		b	.L69
 933              	.LVL76:
 934              	.L76:
 934:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 935              		.loc 1 934 14 view .LVU314
 936              	.LBE4:
1005:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 937              		.loc 1 1005 14 view .LVU315
 938 00e2 6FF00100 		mvn	r0, #1
 939 00e6 D4E7     		b	.L69
 940              	.L83:
 941              		.align	2
 942              	.L82:
 943 00e8 00000000 		.word	.LC0
 944 00ec 28000000 		.word	.LC1
 945 00f0 34000000 		.word	.LC2
 946 00f4 5C000000 		.word	.LC3
 947 00f8 00000000 		.word	ip_addr_any
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 40


 948 00fc 00000000 		.word	.LANCHOR0
 949              		.cfi_endproc
 950              	.LFE164:
 952              		.section	.text.ip4_output_if,"ax",%progbits
 953              		.align	1
 954              		.global	ip4_output_if
 955              		.syntax unified
 956              		.thumb
 957              		.thumb_func
 959              	ip4_output_if:
 960              	.LVL77:
 961              	.LFB163:
 824:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_OPTIONS_SEND
 962              		.loc 1 824 1 is_stmt 1 view -0
 963              		.cfi_startproc
 964              		@ args = 12, pretend = 0, frame = 0
 965              		@ frame_needed = 0, uses_anonymous_args = 0
 824:ThirdPackage/lwip220/core/ipv4/ip4.c **** #if IP_OPTIONS_SEND
 966              		.loc 1 824 1 is_stmt 0 view .LVU317
 967 0000 10B5     		push	{r4, lr}
 968              	.LCFI10:
 969              		.cfi_def_cfa_offset 8
 970              		.cfi_offset 4, -8
 971              		.cfi_offset 14, -4
 972 0002 84B0     		sub	sp, sp, #16
 973              	.LCFI11:
 974              		.cfi_def_cfa_offset 24
 975 0004 089C     		ldr	r4, [sp, #32]
 841:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if (dest != LWIP_IP_HDRINCL) {
 976              		.loc 1 841 3 is_stmt 1 view .LVU318
 977              	.LVL78:
 842:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (ip4_addr_isany(src)) {
 978              		.loc 1 842 3 view .LVU319
 842:ThirdPackage/lwip220/core/ipv4/ip4.c ****     if (ip4_addr_isany(src)) {
 979              		.loc 1 842 6 is_stmt 0 view .LVU320
 980 0006 9446     		mov	ip, r2
 981 0008 1AB1     		cbz	r2, .L85
 843:ThirdPackage/lwip220/core/ipv4/ip4.c ****       src_used = netif_ip4_addr(netif);
 982              		.loc 1 843 5 is_stmt 1 view .LVU321
 843:ThirdPackage/lwip220/core/ipv4/ip4.c ****       src_used = netif_ip4_addr(netif);
 983              		.loc 1 843 8 is_stmt 0 view .LVU322
 984 000a 09B1     		cbz	r1, .L86
 843:ThirdPackage/lwip220/core/ipv4/ip4.c ****       src_used = netif_ip4_addr(netif);
 985              		.loc 1 843 9 discriminator 1 view .LVU323
 986 000c 0A68     		ldr	r2, [r1]
 987              	.LVL79:
 843:ThirdPackage/lwip220/core/ipv4/ip4.c ****       src_used = netif_ip4_addr(netif);
 988              		.loc 1 843 9 discriminator 1 view .LVU324
 989 000e 02B9     		cbnz	r2, .L85
 990              	.L86:
 844:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 991              		.loc 1 844 7 is_stmt 1 view .LVU325
 844:ThirdPackage/lwip220/core/ipv4/ip4.c ****     }
 992              		.loc 1 844 16 is_stmt 0 view .LVU326
 993 0010 211D     		adds	r1, r4, #4
 994              	.LVL80:
 995              	.L85:
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 41


 852:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_OPTIONS_SEND */
 996              		.loc 1 852 3 is_stmt 1 view .LVU327
 852:ThirdPackage/lwip220/core/ipv4/ip4.c **** #endif /* IP_OPTIONS_SEND */
 997              		.loc 1 852 10 is_stmt 0 view .LVU328
 998 0012 0294     		str	r4, [sp, #8]
 999 0014 9DF81C20 		ldrb	r2, [sp, #28]	@ zero_extendqisi2
 1000 0018 0192     		str	r2, [sp, #4]
 1001 001a 9DF81820 		ldrb	r2, [sp, #24]	@ zero_extendqisi2
 1002 001e 0092     		str	r2, [sp]
 1003 0020 6246     		mov	r2, ip
 1004 0022 FFF7FEFF 		bl	ip4_output_if_src
 1005              	.LVL81:
 854:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 1006              		.loc 1 854 1 view .LVU329
 1007 0026 04B0     		add	sp, sp, #16
 1008              	.LCFI12:
 1009              		.cfi_def_cfa_offset 8
 1010              		@ sp needed
 1011 0028 10BD     		pop	{r4, pc}
 854:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 1012              		.loc 1 854 1 view .LVU330
 1013              		.cfi_endproc
 1014              	.LFE163:
 1016              		.section	.text.ip4_output,"ax",%progbits
 1017              		.align	1
 1018              		.global	ip4_output
 1019              		.syntax unified
 1020              		.thumb
 1021              		.thumb_func
 1023              	ip4_output:
 1024              	.LVL82:
 1025              	.LFB165:
1043:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
1044:ThirdPackage/lwip220/core/ipv4/ip4.c **** /**
1045:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * Simple interface to ip_output_if. It finds the outgoing network
1046:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * interface and calls upon ip_output_if to do the actual work.
1047:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
1048:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param p the packet to send (p->payload points to the data, e.g. next
1049:ThirdPackage/lwip220/core/ipv4/ip4.c ****             protocol header; if dest == LWIP_IP_HDRINCL, p already includes an
1050:ThirdPackage/lwip220/core/ipv4/ip4.c ****             IP header and p->payload points to that IP header)
1051:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param src the source IP address to send from (if src == IP4_ADDR_ANY, the
1052:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *         IP  address of the netif used to send is used as source address)
1053:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param dest the destination IP address to send the packet to
1054:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param ttl the TTL value to be set in the IP header
1055:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param tos the TOS value to be set in the IP header
1056:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @param proto the PROTOCOL to be set in the IP header
1057:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *
1058:ThirdPackage/lwip220/core/ipv4/ip4.c ****  * @return ERR_RTE if no route is found
1059:ThirdPackage/lwip220/core/ipv4/ip4.c ****  *         see ip_output_if() for more return values
1060:ThirdPackage/lwip220/core/ipv4/ip4.c ****  */
1061:ThirdPackage/lwip220/core/ipv4/ip4.c **** err_t
1062:ThirdPackage/lwip220/core/ipv4/ip4.c **** ip4_output(struct pbuf *p, const ip4_addr_t *src, const ip4_addr_t *dest,
1063:ThirdPackage/lwip220/core/ipv4/ip4.c ****            u8_t ttl, u8_t tos, u8_t proto)
1064:ThirdPackage/lwip220/core/ipv4/ip4.c **** {
 1026              		.loc 1 1064 1 is_stmt 1 view -0
 1027              		.cfi_startproc
 1028              		@ args = 8, pretend = 0, frame = 0
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 42


 1029              		@ frame_needed = 0, uses_anonymous_args = 0
 1030              		.loc 1 1064 1 is_stmt 0 view .LVU332
 1031 0000 F0B5     		push	{r4, r5, r6, r7, lr}
 1032              	.LCFI13:
 1033              		.cfi_def_cfa_offset 20
 1034              		.cfi_offset 4, -20
 1035              		.cfi_offset 5, -16
 1036              		.cfi_offset 6, -12
 1037              		.cfi_offset 7, -8
 1038              		.cfi_offset 14, -4
 1039 0002 85B0     		sub	sp, sp, #20
 1040              	.LCFI14:
 1041              		.cfi_def_cfa_offset 40
 1042 0004 0446     		mov	r4, r0
 1043 0006 0F46     		mov	r7, r1
 1044 0008 1546     		mov	r5, r2
 1045 000a 1E46     		mov	r6, r3
1065:ThirdPackage/lwip220/core/ipv4/ip4.c ****   struct netif *netif;
 1046              		.loc 1 1065 3 is_stmt 1 view .LVU333
1066:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
1067:ThirdPackage/lwip220/core/ipv4/ip4.c ****   LWIP_IP_CHECK_PBUF_REF_COUNT_FOR_TX(p);
 1047              		.loc 1 1067 3 view .LVU334
 1048              		.loc 1 1067 3 view .LVU335
 1049 000c 827B     		ldrb	r2, [r0, #14]	@ zero_extendqisi2
 1050              	.LVL83:
 1051              		.loc 1 1067 3 is_stmt 0 view .LVU336
 1052 000e 012A     		cmp	r2, #1
 1053 0010 12D1     		bne	.L93
 1054              	.LVL84:
 1055              	.L89:
 1056              		.loc 1 1067 3 is_stmt 1 discriminator 3 view .LVU337
 1057              		.loc 1 1067 3 discriminator 3 view .LVU338
1068:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
1069:ThirdPackage/lwip220/core/ipv4/ip4.c ****   if ((netif = ip4_route_src(src, dest)) == NULL) {
 1058              		.loc 1 1069 3 discriminator 3 view .LVU339
 1059              		.loc 1 1069 16 is_stmt 0 discriminator 3 view .LVU340
 1060 0012 2846     		mov	r0, r5
 1061 0014 FFF7FEFF 		bl	ip4_route
 1062              	.LVL85:
 1063              		.loc 1 1069 6 discriminator 3 view .LVU341
 1064 0018 B0B1     		cbz	r0, .L91
1070:ThirdPackage/lwip220/core/ipv4/ip4.c ****     LWIP_DEBUGF(IP_DEBUG, ("ip4_output: No route to %"U16_F".%"U16_F".%"U16_F".%"U16_F"\n",
1071:ThirdPackage/lwip220/core/ipv4/ip4.c ****                            ip4_addr1_16(dest), ip4_addr2_16(dest), ip4_addr3_16(dest), ip4_addr4_16
1072:ThirdPackage/lwip220/core/ipv4/ip4.c ****     IP_STATS_INC(ip.rterr);
1073:ThirdPackage/lwip220/core/ipv4/ip4.c ****     return ERR_RTE;
1074:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
1075:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
1076:ThirdPackage/lwip220/core/ipv4/ip4.c ****   return ip4_output_if(p, src, dest, ttl, tos, proto, netif);
 1065              		.loc 1 1076 3 is_stmt 1 view .LVU342
 1066              		.loc 1 1076 10 is_stmt 0 view .LVU343
 1067 001a 0290     		str	r0, [sp, #8]
 1068 001c 9DF82C30 		ldrb	r3, [sp, #44]	@ zero_extendqisi2
 1069 0020 0193     		str	r3, [sp, #4]
 1070 0022 9DF82830 		ldrb	r3, [sp, #40]	@ zero_extendqisi2
 1071 0026 0093     		str	r3, [sp]
 1072 0028 3346     		mov	r3, r6
 1073 002a 2A46     		mov	r2, r5
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 43


 1074 002c 3946     		mov	r1, r7
 1075 002e 2046     		mov	r0, r4
 1076              	.LVL86:
 1077              		.loc 1 1076 10 view .LVU344
 1078 0030 FFF7FEFF 		bl	ip4_output_if
 1079              	.LVL87:
 1080              	.L90:
1077:ThirdPackage/lwip220/core/ipv4/ip4.c **** }
 1081              		.loc 1 1077 1 view .LVU345
 1082 0034 05B0     		add	sp, sp, #20
 1083              	.LCFI15:
 1084              		.cfi_remember_state
 1085              		.cfi_def_cfa_offset 20
 1086              		@ sp needed
 1087 0036 F0BD     		pop	{r4, r5, r6, r7, pc}
 1088              	.LVL88:
 1089              	.L93:
 1090              	.LCFI16:
 1091              		.cfi_restore_state
1067:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 1092              		.loc 1 1067 3 is_stmt 1 discriminator 1 view .LVU346
1067:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 1093              		.loc 1 1067 3 discriminator 1 view .LVU347
 1094 0038 054B     		ldr	r3, .L94
 1095              	.LVL89:
1067:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 1096              		.loc 1 1067 3 is_stmt 0 discriminator 1 view .LVU348
 1097 003a 40F22B42 		movw	r2, #1067
 1098 003e 0549     		ldr	r1, .L94+4
 1099              	.LVL90:
1067:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 1100              		.loc 1 1067 3 discriminator 1 view .LVU349
 1101 0040 0548     		ldr	r0, .L94+8
 1102              	.LVL91:
1067:ThirdPackage/lwip220/core/ipv4/ip4.c **** 
 1103              		.loc 1 1067 3 discriminator 1 view .LVU350
 1104 0042 FFF7FEFF 		bl	printf
 1105              	.LVL92:
 1106 0046 E4E7     		b	.L89
 1107              	.LVL93:
 1108              	.L91:
1073:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 1109              		.loc 1 1073 12 view .LVU351
 1110 0048 6FF00300 		mvn	r0, #3
 1111              	.LVL94:
1073:ThirdPackage/lwip220/core/ipv4/ip4.c ****   }
 1112              		.loc 1 1073 12 view .LVU352
 1113 004c F2E7     		b	.L90
 1114              	.L95:
 1115 004e 00BF     		.align	2
 1116              	.L94:
 1117 0050 00000000 		.word	.LC0
 1118 0054 28000000 		.word	.LC1
 1119 0058 34000000 		.word	.LC2
 1120              		.cfi_endproc
 1121              	.LFE165:
 1123              		.section	.bss.ip_id,"aw",%nobits
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 44


 1124              		.align	1
 1125              		.set	.LANCHOR0,. + 0
 1128              	ip_id:
 1129 0000 0000     		.space	2
 1130              		.text
 1131              	.Letext0:
 1132              		.file 2 "k:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1133              		.file 3 "k:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\\
 1134              		.file 4 "ThirdPackage/lwip220/include/lwip/arch.h"
 1135              		.file 5 "ThirdPackage/lwip220/include/lwip/err.h"
 1136              		.file 6 "ThirdPackage/lwip220/include/lwip/pbuf.h"
 1137              		.file 7 "ThirdPackage/lwip220/include/lwip/ip4_addr.h"
 1138              		.file 8 "ThirdPackage/lwip220/include/lwip/ip_addr.h"
 1139              		.file 9 "ThirdPackage/lwip220/include/lwip/memp.h"
 1140              		.file 10 "ThirdPackage/lwip220/include/lwip/netif.h"
 1141              		.file 11 "ThirdPackage/lwip220/include/lwip/prot/ip4.h"
 1142              		.file 12 "ThirdPackage/lwip220/include/lwip/ip.h"
 1143              		.file 13 "k:\\program files (x86)\\gnu arm embedded toolchain\\10 2021.10\\arm-none-eabi\\include\
 1144              		.file 14 "ThirdPackage/lwip220/include/lwip/def.h"
 1145              		.file 15 "ThirdPackage/lwip220/include/lwip/ip4_frag.h"
 1146              		.file 16 "ThirdPackage/lwip220/include/lwip/udp.h"
 1147              		.file 17 "ThirdPackage/lwip220/include/lwip/priv/tcp_priv.h"
 1148              		.file 18 "ThirdPackage/lwip220/include/lwip/icmp.h"
ARM GAS  C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s 			page 45


DEFINED SYMBOLS
                            *ABS*:00000000 ip4.c
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:20     .text.ip4_input_accept:00000000 $t
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:25     .text.ip4_input_accept:00000000 ip4_input_accept
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:91     .text.ip4_input_accept:00000030 $d
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:96     .text.ip4_route:00000000 $t
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:102    .text.ip4_route:00000000 ip4_route
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:260    .text.ip4_route:000000a4 $d
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:266    .text.ip4_input:00000000 $t
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:272    .text.ip4_input:00000000 ip4_input
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:680    .text.ip4_input:00000198 $d
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:686    .rodata.ip4_output_if_src.str1.4:00000000 $d
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:699    .text.ip4_output_if_src:00000000 $t
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:705    .text.ip4_output_if_src:00000000 ip4_output_if_src
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:943    .text.ip4_output_if_src:000000e8 $d
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:953    .text.ip4_output_if:00000000 $t
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:959    .text.ip4_output_if:00000000 ip4_output_if
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:1017   .text.ip4_output:00000000 $t
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:1023   .text.ip4_output:00000000 ip4_output
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:1117   .text.ip4_output:00000050 $d
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:1124   .bss.ip_id:00000000 $d
C:\Users\86188\AppData\Local\Temp\ccNPgMf9.s:1128   .bss.ip_id:00000000 ip_id

UNDEFINED SYMBOLS
ip4_addr_isbroadcast_u32
ip_data
netif_list
netif_default
pbuf_free
lwip_htons
pbuf_realloc
ip4_reass
pbuf_remove_header
udp_input
tcp_input
icmp_input
pbuf_header_force
icmp_dest_unreach
pbuf_add_header
printf
ip4_frag
ip_addr_any
